network work group kalin request comment mit juli simplifi ncp protocol abstract rfc defin new ncp protocol simpl enough implement veri small comput can extend effici oper larg timeshar machin worst case storag requir can predict conserv implement can freed complic resourc alloc storag control procedur general error recoveri procedur defin overview ration central premis propos insist user user connect bi direct familiar with communic theori appear reason communic requir cyclic flow inform deni simpl associ between messag repli make protocol unnecessarili complic turn simpl mechan flow control nightmar propos bi direct connect duplex link identifi by pair socket number end half number present requir associ with connect number crate messag contain crate travel back link carri network messag side buffer alloc end link hold crate messag carri worst case buffer requir equal number crate circul capac link detail messag buffer state follow cyclic empti fill with messag laden crate unload fill with empti crate fill with messag laden crate sent kalin page rfc simplifi ncp protocol juli state transit correspond messag arriv messag remov messag insert messag transmiss process ncp make initi contact with foreign host via control link necessari delet user user link left previous system incarn creat user user link interfac user with link delet user user link function discuss except point contain critic race can resolv without make assumpt maximum messag propag delay within arpa network bound messag turnaround time exist approach chosen necessarili tender function discuss viewpoint interest implement minim ncp extens improv propos suitabl larger machin ncp capabl creat duplex link between local user process remot current protocol accomplish by queu potenti unbound number rfc wait user examin queue determin with wish talk guarante user look queue way limit size queue overflow error messag suggest fail respect admit rfc sent again pictur need bleak follow network convers demonstr connect can made without use queue reli user process attent suppos local user process remot user process wish establish new connect remot process ask ncp listen connect request give socket identifi end option can give both socket identifi user process local end ask ncp send request duplex link rfdl specifi both socket identifi propos link local ncp send rfdl control link with follow format rfdl kalin page rfc simplifi ncp protocol juli argument suppli by local ncp indic maximum number buffer ncp consid alloc duplex link buffer user storag count given by user call made ncp rfdl receiv remot host remot ncp compar against socket identifi suppli by unmatch listen issu listen singl identifi given match both socket identifi given both match match found acknowledg messag with follow format sent back by ncp acdl paramet equal smaller specifi rfdl number messag buffer agreeabl remot ncp match found error messag return acdl equal note rfdl mechan similar rfc mechan bound queue size connect accept entir by ncp varieti listen correspond mode channel oper singl paramet varieti typifi by login process use by program talk with happen dial number screen contact appropri left user process doubl paramet listen use by user program know with communic wish bother by random rfdl sourc given way socket space partit imposs get match rfdl process but intend messag buffer connect alloc remot host befor send acdl local host time acdl receiv number buffer end equal paramet acdl state remot buffer empti local buffer fill with empti crate after buffer alloc local user process notifi start send messag type interfac present by ncp between user process newli creat duplex link decis local host simpl but complet interfac provid call made ncp getmessag return next messag link complet with mark text pad putmessag take kalin page rfc simplifi ncp protocol juli messag mark text buffer transmiss obvious logic error report suggest messag align left user machin simpl but time consum oper ncp guarante user readjust usual possibl know priori text portion right adjust word boundari left adjust word boundari align end last messag fragment exot way within protocol messag boundari use provid storag alloc inform requir by user inform can forgotten user interfac can made appear bit stream though welcom by purist strategi produc complic attempt synchron both end link link delet by remov empti crate reclaim buffer alloc crate remov buffer with crate can reclaim empti buffer remain avail receiv messag arriv crate left buffer remain socket identifi can forgotten empti crate remov decrement size messag sent foreign ncp allow reduc buffer alloc dec repli solicit foreign ncp affirm delet complain error possibl error includ link imposs number buffer drop option close link can given user process by provid system call nomoreoutput declar messag sent by local user process local buffer link contain empti crate reclaim by ncp dec messag sent foreign ncp crate empti via getmessag call buffer reclaim altern call killmessag can implement call can use place putmessag fill empti crate with messag sent killmessag caus crate reclaim dec control messag sent situat user process die reason can close link drastic measur taken situat abend control messag defin abend kalin page rfc simplifi ncp protocol juli after send abend issu ncp start close link buffer contain input destroy dec issu previous empti buffer messag arriv link destroy dec issu abend receiv link ignor remot ncp receiv abend stop send messag link refus new messag user process end empti buffer reclaim pend output messag destroy buffer reclaim input messag fed user process long accept buffer reclaim input accept dec issu cover buffer reclaim user process take input input messag destroy buffer reclaim eventu buffer reclaim both end link time connect can consid close socket number use can reassign without ambigu under propos protocol function constitut part network ncp buffer alloc free exist can overflow error need place constraint messag flow user messag arriv buffer room guarante control messag can process without requir addit storag alloc attempt by user process issu listen can thwart by local control procedur ineffici storag result number outstand connect get larg price code simplic fifti percent util buffer space larg host prove advantag implement follow ncp extens with complic flow control procedur becom possibl ncp alloc buffer space than exist still get troubl extens provid messag compress improv throughput user transpar error recoveri extens requir cooper foreign host assum implement than minim ncp propos inquiri control messag use find extens foreign host implement respons inq control messag defin host profil undefin error messag return foreign host assum minim ncp simpl extens defin control messag replac user rfnm user rfnm null text messag sent exampl repli file transfer via duplex link ineffici tie entri imp link assign kalin page rfc simplifi ncp protocol juli tabl degrad network throughput effici solut send special messag control link way short messag can replac user messag urfnm control link concurr with return side user link urfnm can substitut user rfnm messag sent return link otherwis order lost with user transpar throughput can increas with mechan add addit crate duplex link user instig decis ncp foreign host repli increas request by return incr incr foreign ncp unabl meet addit buffer demand than possibl initi state local buffer ad fill with empti crate foreign buffer empti spare argument rfdl acdl could use declar maximum size messag sent direct percept ncp could observ inform alloc smaller buffer lesser ncp could ignor alway assum maximum length messag exampl field user rfnm sent smart ncp alloc storag ncp retain copi user messag sent network until repli return automat error recoveri procedur can implement capac link alway known ncp can determin messag transit by send stop messag foreign ncp stop stop messag tell foreign ncp temporarili stop transmit messag select link unlik ceas link guarante messag sent befor stop take effect local ncp send link inquiri messag linq kalin page rfc simplifi ncp protocol juli repli give number crate foreign end link linq messag repeat until number number local crate equal capac link time messag transit end link synchron messag can identifi relat synchron point local ncp can send control messag ask exampl last messag retransmit foreign ncp identifi messag retransmit error recov start control messag similar format stop sent foreign ncp normal oper continu entir recoveri procedur can transpar both user process expect larger host adher strict worst case storag alloc requir alloc buffer than repli statist keep troubl time conduct perfect permiss long transpar foreign host protocol allow ncp lie storag alloc long caught situat detect appear immin follow control mechan need appli list increas order power send user rfnm short messag good chanc replac by longer messag strain buffer capac tri accept new messag imp block local process attempt issu messag issu dec free buffer space alloc than buffer rfdl refus fake error messag wait local user action host sent implement error recoveri free buffer space allow recov final measur admit last resort but power enough control emerg hope author protocol present attract altern propos by rfc addit appear late date than minor jolt implement effort simpl enough implement quick adopt major present site could talk intellig with by end summer kalin page rfc simplifi ncp protocol juli refer crocker postel newkirk kraley offici protocol proffer rfc june author address richard kalin mit lincoln laboratori rfc put machin readabl form entri onlin rfc archiv by ian redfern kalin page