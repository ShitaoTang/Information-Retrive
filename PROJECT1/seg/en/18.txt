 network working group james e white request for comments computer research lab category informational university of california santa barbara california march network specifications for remote job entry and remote job output retrieval at ucsb in the discussions that follow byte means bits with those eight bits numbered from left to right i remote job entry rje ucsb will accept input of pseudo card files for batch processing at socket number x site network users should obtain an account number from the ucsb computer center account programmer names ucla sri utah etc may be used during checkout the runs under os mvt and hasp users submit jobs to hasp for scheduling and subsequent execution by os through an intermediary process hereafter called rje which is addressed as socket number x and can be invoked through the logger this section is intended to provide programmers with the information necessary to communicate with rje the is assumed familiar with the batch services offered by the computer center and with its job control language jcl requirements rje conducts all network transactions through the ncp which operates under the host host protocol of august it expects the first message it receives to be type discards the first eight bits the message type assuming them to be zeros and thereafter for the life of the connection takes no notice of imp message boundaries i a logging into rje to submit one or more jobs for batch processing the network user must establish a simplex connection with rje rje is core resident only while such a simplex connection is established i e while a user is transmitting a file at all other times it resides on direct access storage and must be invoked through the logger a login sequence can always be initiated by requesting connection to socket x rje does not serve multiple users simultaneously this if a connection request is made to that socket while rje is in use the ncp will queue the request when the current file transmission is white page rfc rje at ucsb march complete rje will listen for and accept the next request if any in its queue if no requests are queued for it it will terminate execution releasing the main storage it occupied at times when rje is not in core the logger listens on socket x and will reject the first call it receives read rje into core and dispatch it rje will then list on that socket thus to initiate a login sequence the user requests connection to socket x if accepted he is in contact with rje if rejected he should reissue the connection request when accepted he will be connected to rje a second rejection would indicate that the ncp s resources were exhausted once the connection has been established rje will consider the user logged in to prevent rje from being monopolized by a single user provision is made within the software for terminating a connection if rje is ever required to wait more than a certain amount of time for a transmission from the connected user for now this time limit has been set at one minute per record but it may be shortened or lengthened as required in the future barring such termination rje will maintain its connection to the user indefinitely card images will be accepted over the connection and each one will be passed to hasp as it is received the user is expected to close the connection once his file has been transmitted rje will interpret that action as an end of file indication and the user will be considered logged off i b the rje connection rje expects the first byte of data it receives over the connection established with it to be zeros indicating message type it discards this byte unexamined and thereafter attaches no significance to imp message boundaries the second byte of data received is interpreted as flags specifying the format of the data file to follow the byte is interpreted as follows bits file follows as class a stream oriented input not defined should not occur file follows as class b variable length record input file follows as class c fixed length record input bits not examined should be zeros once made this declaration prevails for the life of the connection regardless of the input class specified the user transmits his file as card images each of which will be padded on the right with blanks or truncated on the right to bytes if necessary the file white page rfc rje at ucsb march transmitted must be structured exactly as if it were being placed on the card reader at the computer center a job card and all the other usual jcl must be present for each job in the file batching of jobs is permissible and is transparent to rje for any job which requires that special non resident disk s and or tape s to be mounted a special jcl card must be inserted immediately after the job card for that job and it must have the format setup vol ser vol ser where vol ser is the volume serial number of a volume requiring i mounting setup begins in column vol ser must begin in column the job will then enter the system in a hasp hold status until the required volume s can be mounted by the operator if the user neglects to declare all such required volumes his job is subject to immediate cancellation all cards of the file which are not contained in a sysin data set must consist of valid ebcdic characters i b class a stream oriented input if input to rje has been declared as class a the third byte of data received over the connection by rje is interpreted as a break character declaration each byte received thereafter is compared to that character any other character is taken to be the next byte of the current card image whenever the break character is encountered the previous byte is taken to be the last byte of the current card image which is then padded or truncated as required and passed to hasp zero or more non break characters may occur between occurrences of the break character thus when class a input is specified data transmitted to rje shall have the following form variable break break x x char card image char where the length of each field has been specified in bytes zero or more occurrences of the quantity in parentheses angle brackets may be transmitted before the connection is closed by the user i b class b variable length record input if input to rje has been declared as class b then all input after white page rfc rje at ucsb march the initial two bytes is expected to consist of a contiguous string of variable length records each consisting of a one byte op code the op code should be x a two byte length field which specifies the unsigned length in bits of the variable length text field which follows the text field may be zero or more bytes in length the length field must contain an integer which is a multiple of the text field represents one card image which is padded or truncated by rje as required and passed to hasp thus when class b input is specified data transmitted to rje shall have the form l bits text x x x l card image where the length of each field has been specified in bytes except where stated to the contrary zero or more occurrences of the quantity in parentheses angle brackets may be transmitted before the connection is closed i b class c fixed length record input if input to rje has been declared as class c then all input after the initial two bytes is expected to consist of a contiguous string of fixed length byte card images thus when class c input is specified data transmitted to rje shall have the form x x c card image where the length of each field has been specified in bytes zero or more occurrences of the quantity in parentheses angle brackets may be transmitted before the connection is closed ii remote job output retrieval rjor class a sysout output from jobs submitted through rje for batch processing at ucsb may be obtained by contacting socket x site provided that when the job was submitted the character t appeared as the eighth positional accounting parameter on the job card output is retrieved upon request and relayed to the network user by a process hereafter called rjor which is addressed as socket x rjor can be invoked through the logger this section is intended to provide programmers with the information necessary to communicate with rjor white page rfc rje at ucsb march rjor conducts all network transactions through the ncp which operates under the host host protocol of august rjor expects the first message it receives to be type discards the first byte assuming it to be zeros and thereafter for the life of the connection takes no notice of imp message boundaries similarly the first message sent by rjor is of type the first byte consists of zeros and thereafter for the life of the connection imp message boundaries are not significant ii a logging into rjor to obtain output from a batch mode job the network user must establish a full duplex connection with rjor rjor is core resident only while in use i e while control information or a file is being transmitted to or from a user or while rjor is waiting for a previously requested output file or files at all other times it resides on direct access storage and must be invoked through the logger a login sequence can always be initiated by requesting connection to socket x if a connection request is made to that socket while another user is being logged in the ncp will queue the request after the current connection is terminated rjor will listen for and accept the next request in any in its queue if no requests are queued for it and if it has fulfilled all of its output file requests it will terminate execution releasing the main storage it occupied at times when rjor is not in core the logger listens on socket x and will reject the first call it receives read rjor into core and dispatch it rjor will then listen on that socket thus to initiate a login sequence the user requests connection to socket x if accepted he is in contact with rjor if rejected he should reissue the connection request when accepted he will be connected to rjor a second rejection would indicate that the ncp s resources were exhausted once this first half of the required duplex connection has been established rjor will consider the user logged in over this first connection hereafter called the input connection the user transmits flags designating the function s to be performed by rjor and the name of the job to which the function s is are to be applied rjor then closes this connection rjor transmits control information specifying the disposition of the user s request and the output file if requested over a secondary connection involving rjor s socket number x site and the socket at the user s site whose socket number is one less than that on which rjor was contacted by the user the user s request may or may not be immediately executable if the former is the case rjor issues a connection request to the designated user receive socket and when the connection is established transmits whatever control information is appropriate along with the user s output if required rjor then closes the connection and the user is considered logged out if the user s request cannot be white page rfc rje at ucsb march immediately satisfied e g the job whose output is sought hasn t been submitted yet or hasn t finished execution the second connection is opened by rjor just long enough to inform the user of the delay and then closed then when the request can be serviced the connection is reopened the required data transmitted and the connection closed the user is then considered logged out to prevent rjor from being monopolized by a single user provision is made within the software for terminating a connection if rjor is ever required to wait more than a certain amount of time for completion of a transmission to or from the connected user for now this time limit has been set at one minute per record but it may be shortened or lengthened as required in the future ii b the input connection rjor expects the first byte of data it receives over the input connection to be zeros indicating message type it discards this byte unexamined and thereafter attaches no significance to imp message boundaries the second byte of data received is interpreted as flags specifying the function s to be performed following the flag byte rjor expects an eight byte ebcdic job name padded on the right with blanks if necessary the flag byte is interpreted as follows bit transmit the output generated by the specified job bit purge the output file created by the specified job bit wait as long as is required to execute the function s specified by bits if the function s specified by bits cannot be executed immediately simply return an indication of that fact bit an earlier request pertaining to the specified job which exercised the wait for output bit option is to be canceled bits not examined should be zeros any combination of bits is permissible if bit no other bits are examined if bit and bit the output file is transmitted before it is purged if two jobs with the same name are executed in succession output from the second job will overlay that produced by the first in such cases the user should purge the output from the first job after it has been transmitted to him so that a request for output from the second job will not simply return a second copy of the first job s output ii c the output connection rjor may open the output connection either one or two times as the white page rfc rje at ucsb march result of a single transmission on the input connection in each case the first byte transmitted will consist of zeros indicating message type and thereafter for the life of the connection imp message boundaries are not significant following the first byte rjor will transmit the name of the job to which the response applies the job name will be contained in an byte field identical to that supplied by the user over the input connection following the job name rjor will transmit zero or more variable length logical records each will consist of a one byte op code a two byte length field which specifies the unsigned length in bits of the variable length text field which follows the text field may be zero or more bytes in length the length field will contain an integer which is a multiple of eight the op codes presently defined are listed in figure an op code of x indicates that the text field contains one record of one of the sysout data sets created by the job whose output was requested the length fields of all logical records with an op code of x will be identical for data sets with record lengths other than this value records are padded on the right side with blanks or truncated on the right to this standard record length carriage control characters which would ordinarily appear in column for printer destined output have been discarded and do not appear the records are transmitted to the user in the same sequence as they would be printed on the printer and collectively include everything that would appear in printed output with the exception of hasp separator sheets in all logical records but those with an op code of x the length field contains the value zero and the op code conveys the entire meaning of the logical record this restriction is temporary a fix is in the works and will be announced white page rfc rje at ucsb march figure output connection op codes op code hex name explanation end of file all output from the job has been transmitted follows last op code x logical record output the text field contains one record of one sysout data set generated by the job output file purged output from the job has been purged as requested no core for buffer insufficient main storage is available for transmitting output from the job the transmission request has been aborted and the purge request if any has been suppressed i o error reading an irrecoverable i o error was file encountered reading the output file the transmission request has been aborted and the purge request if any suppressed i o error purging an irrecoverable i o error was file encountered purging the output file the purge request was aborted no queue space for output from the job was not available request and the wait for output option was specified but rjor s resources were insufficient to queue the request which was suppressed waiting for output output from the job is not available and the wait for output option was specified rjor is waiting for the job s output canceled request not the user requested that a previously found made request specifying the wait for output option be canceled no such request was found by rjor request canceled at the user s request a previously made request specifying the wait for output option has been canceled a i o error seeking an irrecoverable i o error was file encountered attempting to locate output from the job the user s request was white page rfc rje at ucsb march aborted b output not found output from the job was not found the wait for output option was not specified by the user this rfc was put into machine readable form for entry into the online rfc archives by randy dunlap white page 