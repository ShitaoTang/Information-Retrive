 network working group c holland request for comments ucsd cc category protocols rje june nic proposed remote job entry protocol remote job entry is the mechanism whereby a user at one location causes a batch processing job to be run at some other location this protocol specifies the network standard procedures for such a user to communicate over the network with a remote batch processing server causing that server to retrieve a job input file process the job and deliver the job s output file s to a remote location the protocol uses telnet to a special standardized logger not socket connection for all control communication between the user and the server rje process the server site then uses the file transfer protocol to retrieve the job input file and to deliver the output file s there are two types of users direct users persons and user processes the direct user communicates from an interactive terminal attached to a tip or any host this user may cause the input and or output to be retrieved sent on a specific socket at the specified host such as for card readers or printers on a tip or the user may have the files transferred by pathname using file transfer protocol the other type of user is an rje user process in one remote host communicating with the rje server process in another host this type of user ultimately receives its instructions from a human user but through some unspecified indirect means the command and response streams of this protocol are designed to be readily used and interpreted by both the human user and the user process a particular user location may choose to establish the telnet control connection for each logical job or may leave the control connection open for extended periods if the control connection is left open then multiple job files may be directed to be retrieved or optionally to servers that are able to determine the end of one logical job by the input stream and form several jobs out of one input file one continuous retrieval may be done as from a tip card reader this then forms a hot card reader to a particular server with the telnet connection serving as a job monitor since the output is always transferred job at a time per connection to the output socket the output from this hot reader would appear when ready as if to a hot printer another possibility for more complex hosts is to attach an rje user process to a card reader and take instructions from a lead control card causing an rje control telnet to be opened to the appropriate host with appropriate logon and input retrieval holland page rfc remote job entry june commands this card reader would appear to the human user as a network host card reader the details of this rje user process are beyond the scope of this protocol general specifications user a human user at a real terminal or a process that supplies the command control stream causing a job to be submitted remotely will be termed the user the procedure by which a process user receives its instructions is beyond the scope of this protocol user telnet the user communicates its commands over the network in network virtual terminal code through a user telnet process in the user s host this user telnet process initiates its activity via icp to the standard rje logger socket socket at the desired rje server host rje server telnet the rje server process receives its command stream from and sends its response stream to the telnet channel through an rje server telnet process in the server host this process must listen for the icp on the rje logger socket and cause appropriate icp socket shifting telnet connection the command and response streams for the rje mechanism are via a telnet like connection to a special socket with full specifications according to the current nwg telnet protocol rje server the rje server process resides in the host which is providing remote batch job entry service this process receives input from the rje server telnet controls access through the logon procedure retrieves input job files queues jobs for execution by the batch system responds to status inquiries and transmits job output files when available user ftp all input and output files are transferred under control of the rje server process at its initiative those files may be directly transferred via request for connection to a specific host socket or they may be transferred via file transfer protocol if the later method is used then the rje server acts through its local user ftp process to cause the transfer this process initiates activity by an active request for connection to the ftp logger in the foreign host holland page rfc remote job entry june server ftp this process in a remote host remote from the rje server listens for an icp from the user ftp and then acts upon the commands from the user ftp causing the appropriate file transfer ftp when file transfer protocol is used for rje files the standard ftp mechanism is used as fully specified by the current nwg ftprotocol rje command language the rje system is controlled by a command stream from the user over the telnet connection specifying the user s identity logon the source of the job input file the status altering job status or output disposition additional commands affecting output disposition are includable in the job input file this command language is explicitly specified in a following section of this protocol rje command replies every command input from the user via telnet and certain other conditions calls for a response message from the rje server to the user over the telnet connection these messages are formatted in a standardized manner to facilitate interpretation by both human users and user processes a following section of this protocol specifies the response messages rje commands over telnet connection general conventions all commands will be contained in one input line terminated by the standard telnet crlf the line may be of any length desired by the user explicitly not restricted to a physical terminal line width the characters cr and lf will be ignored by the rje server except in the explicit order crlf and may be used as needed for local terminal control all commands will begin with a recognized command name and may then contain recognized syntactic element strings and free form variable strings for userid pathnames etc recognized words consist of alphanumeric strings letters and digits or punctuation recognized alphanumeric string elements must be separated from each other and from unrecognizable strings by at least one blank or a syntactically permitted punctuation other blanks may be used freely as desired before or after any syntactic element the after the command name in all commands except out and change are optional holland page rfc remote job entry june recognized alphanumeric strings may contain upper case letters or lower case letters in any mixture without syntactic differentiation unrecognizable strings will be used exactly as presented with full differentiation of upper and lower case input unless the host finally using the string defines otherwise there are two types of unrecognizable strings final and imbedded final strings appear as the last syntactic element of a command and are parsed as beginning with the next non blank character of the input stream and continuing to the last non blank character before the crlf imbedded strings include job id and job file id in the out change and alter commands at present these fields will be left undelimitted since they must only be recognizable by the server host which hopefully can recognize its own job ids and file names syntax the following command descriptions are given in a bnf like syntax parenthesized names are non terminal syntactic elements which are expanded in succeeding syntactic equations each equation has the defined name on the left of the and a set of alternative definitions separated by slashes on the right the equations for host file and disp use the characters explicitly in their definitions in these cases the quotes are not part of the definition but surround literal text which is part user user user id this command must be the first command over a new telnet connection as such it initiates a logon sequence the response to this command is either a user code in error b enter password if usercode ok c log on ok proceed if no password required another user command may be sent by the user at any time to change users further input will then be charged to the new user a server may refuse to honor a new user command if it is not able to process it in its current stat during input file transfer for example but the protocol permits the user command at any time holland page rfc remote job entry june without altering previous activity an incorrect subsequent user command or its following pass command are to be ignored with error response leaving the original user logged in it is permissable for a server to close the telnet connection if the initial user pass commands are not completed within a server specified time period it is not required or implied that the logged on user be the user id used for file transfer or job execution but only identifies the submitter of the command stream servers will establish their own rules relating user id with the job execution user for job or output alteration commands successful log on always clears any previous input or output default parameters inid etc pass pass password this command immediately follows a user command and completes the log on procedure although a particular server may not require a password and has already indicated log on ok after the user command every server must permit a pass command and possibly ignore it and acknowledge it with a log on ok if the log on is completed bye bye this command terminates a user and if input transfer is not in progress closes the telnet connection if input is in progress the connection will remain open for result response and will then close during the interim a new user command and no other command is acceptable an unexpected close on the telnet connection will cause the server to take the effective action of an abort and bye inid inpass inid user id inpass password holland page rfc remote job entry june the specified userid and password will be sent in the file transfer request to retrieve the input file these parameters are not used by the server in any other way if this command does not appear then the user pass parameters are used inpath input inpath pathname input pathname input note the following syntax will also be used for output pathname pathname host socket host file host socket host socket socket no host part implies the user site host host decimal integer standard host name socket decimal integer port decimal integer decimal integer implies explicit socket lower bit will be set appropriately for the direction port implies the specified port sockets for a tip tip socket port or host file host attributes file name attributes empty transmission code transmission empty t a n empty implies default which is n for input files a for output files t specifies telnet like coding with imbedded crlf for new line ff for new page n specifies ftp blocked transfer with record marks but without other carriage control a specifies ftp blocked records with asa carriage control column of image is forms control code empty e empty specifies nvt ascii code e specifies ebcdic te not allowed file name any string recognized by the ftp server at the site of the file the pathname syntax is the general rje mechanism for specifying a particular file source or destination for input or output if the host socket form is used then direct transfer will be made by the rje server to the named socket using telnet like ascii if the host file form is used then the rje server will call upon its local ftp user process to do the actual transfer the data stream in this mode is either telnet like ascii or blocked records which may use holland page rfc remote job entry june column for asa carriage control although a mode is permitted on input column is deleted the usual mode would be the default n the output default a would supply carriage control in the first character of each record blank single space new page etc while the optional n mode would transfer the data only as to a card punch etc the file name is an arbitrary unrecognized string which is saved by rje server and sent back over ftp to the ftp server to retrieve or store the appropriate files inpath or input commands first store the specified pathname if one is supplied and then the input command initiates input the inpath name may be used to specify a pathname for later input and the input command without pathname will cause input to initiate over a previously specified pathname an input crlf command with no previous pathname specified is illegal abort abort this command aborts any input retrieval in progress discards already received records and closes the retrieval connection note abort with parameters is an output transmission control outuser outpass outuser user id outpass password the specified userid and password will be sent in the file transfer request to send the output file s these parameters are not used by the server in any other way if this command does not appear then the user pass parameters are used holland page rfc remote job entry june out out out file disp pathname out file empty job file id empty implies the primary print file of the job job file id string representing a specific output file from the job as recognized by the server disp empty h s d empty specifies transmit then discard h specifies hold only do not transmit s specifies transmit and save d specified discard without transmitting note parentheses are part of the above elements pathname see input command this command specifies the disposition of output file s produced by the job unspecified files will be hold only by default the outuser outpass and out commands must be specified before input command to be effective these commands will affect any following jobs submitted by this user over this rje telnet connection a particular job may override these commands by net control cards on the front of the input file once output disposition is specified by this out command or by a net out card the information is kept with the job until final output disposition and is modifiable by the change command output re route change job id out file disp pathname this command changes the output disposition supplied with the job submission the job id is assumed recognizable by the rje server who may verify if this user is authorized to modify the specified job after the job is identified the other information has the same syntax and semantics as the original out command change command may be specified for a job file id which was not mentioned at submission time and has the same effect as an original out command holland page rfc remote job entry june output controls during transmission command count what command restart recover back skip abort hold these commands specify restart the transmission new rfc etc recover restarts transmission from last ftp restart marker reply see ftp back up the output count blocks skip the output forward count blocks abort the output discarding it hold the output after aborting it count empty decimal integer empty implies where defined what pathname job id job file id pathname is as in the inp command job id server recognized job identifier which was supplied at inp completion by the server job file id server recognized file identifier or if missing then the prime printer output of the specified job this collection of commands will modify the transmission of output in progress or recently aborted if output transmission is cut off before completion then the rje server will either try to resend the entire file if the file s disp was transmit and discard or will hold the file for further user control if the disp was s transmit and save either during transmission during the save part of a transmit and save or for a hold only file the above commands may be used to control the transmission the pathname form of what is permitted only if transmission is actually in progress if the file s state is inconsistent with the command then the command is illegal and ignored with reply status status status job id these commands request the status of either the rje server or a particular job respectively the information content of the status reply is site dependent holland page rfc remote job entry june cancel alter cancel job id alter job id site dependent options these commands change the course of a submitted job cancel specifies that the job is to be immediately terminated and any output discarded alter provides for system dependent options such as changing job priority process limits terminate without cancel etc op op any string the specified string is to be displayed to the server site operator when any following job is initiated servicing from the batch queue of the server this command usually appears in the input file as a net op control card but may be a telnet command it is cancelled as a all jobs command by an op crlf command no text supplied rje control cards in the input file certain rje commands may be specified by control cards in the front of the input file if these controls appear they take precedence over the same command given thru the rje telnet connection and affect only this specific job all these rje control cards must appear as the first records of the job s input file they all contain the control word net in columns scanning for these controls stop when the first card without net in col is encountered the control commands appear in individual records and are terminated by the end of record usually an column card image continuation is permitted onto the next record by the appearance of net in columns of the next record column of the next record immediately follows the last character of the previous record net outuser userid net outpass password net out out file disp pathname net op any string holland page rfc remote job entry june see the corresponding telnet commands for details one option permitted by the net outuser and net out controls not possible from the telnet connection is specification of different outusers for different outs since the telnet stores and supplies only an initial outuser but the controls may change outusers before each out control is encountered rje use of file transfer protocol most non tip files will be transferred to or from the rje server through the ftp process rje server will call upon its local ftp user supplying the host file pathname user id password and mode of the desired transfer ftp user will then connect to its ftp server counterpart in the specified host and set up a transfer path data will then flow through the rje ftp interface in the server over the network from to the foreign ftp server and then from to the specified file pathname in the foreign host s file storage space on output files the file pathname may be recognized by the foreign host as directions to a printer or the file may simply be stored a user rje process can supply output pathname by default which is recognized by its own server ftp as routing to a printer although many specifics of the rje server user ftp interface are going to be site dependent there are several ftp options which will be used in a standard way by rje servers a new ftp connection will be initiated for each file to be transferred the connection will be opened with the rje user supplied user id outuser or inuser and password the data bytesize will be bits the ftp type structure and mode parameters are determined by the rje transfer direction i o the transmission and code options supplied by the user holland page rfc remote job entry june i o trans code ftp type structure mode i n ascii r hasp i n e image r hasp i t ascii f ascii i a ascii r hasp i a e image r hasp o a ascii print r hasp o a e ebcdic print r hasp o n ascii r hasp o n e image r hasp o t ascii print f ascii note the i and o are the default cases the service commands used will be retrieve for input and append with create for output the ftp pathname will be the file name supplied by the rje user on output in hasp form the user ftp at the rje server site will send restart markers at periodic intervals like every lines or so and will remember the latest restart marker reply with the file if the file transfer is not completed and the disp is s then the file will be held pending user intervention the user may then use the recover command to cause a ftp restart at the last remembered restart marker reply the ftp abort command will be used for the rje abort and cancel commands the specific form of the ftp commands used by an rje server site and the order in which they are used will not be specified in this protocol errors encountered by ftp fall into three categories a access errors or no storage space error b command format errors and c transfer failure errors since the commands are created by the rje server process an error is a programming problem and should be logged for attention and the situation handled as safely as possible transmission failure or access failure on input cause an effective abort and user notification transmission failure on output causes restart or save depending on disp see out command access failure on output is a problem since the user may not be accessible a status response should be queued for that user should he happen to inquire a disp s file should be held and a disp empty transmit and discard file should be temporarily held and then discarded after a reasonable time if not claimed holland page rfc remote job entry june replies over the telnet connection each action of the rje server including entry of each telnet command is noted over the telnet connection to the user these rje server replies are formatted for human or process interpretation they consist of a leading digit numeric code followed by a blank followed by a text explanation of the message the numeric codes are assigned by groups for future expansion to hopefully cover other protocols besides rje like ftp the numeric code is designed for ease of interpretation by processes the three digits of the code are interpreted as follows a the first digit specifies the type of response indicated these replies are purely informative and are issued voluntarily by the server to inform a user of some state of the server s system replies to a specific status inquiry these replies server as both information and as acknowledgement of the status request positive acknowledgement of some previous command request the reply is a generalized ok for commands which require no other comment other xx replies are specified for specific successful actions incomplete information supplied so far no major problem but activity can not proceed with the input supplied unsuccessful reply a request was correctly specified but could not be correctly completed further attempts will require user commands incorrect or illegal command the command or its parameters were invalid or incomplete from a syntactic view or the command is inconsistent with a previous command the command in question has been totally ignored reserved for expansion b the second digit specifies the general subject to which the response refers x x general purpose replies not assignable to other subjects x primary access there replies refer to the attempt to log on to a server service rje ftp etc holland page rfc remote job entry june x secondary access the primary server is commenting on its ability to access a secondary service rje must log on to a remote ftp service x ftp results x rje results x x reserved for expansion c the final digit specifies a particular message type since the code is designed for an automation process to interpret it is not necessary for every variation of a reply to have a unique number only that the basic meaning have a unique number the text of a reply can explain the specific reason for the reply to a human user each telnet line ended by crlf from the server is intended to be a complete reply message if it is necessary to continue the text of a reply onto following lines then those continuation replies contain the special reply code of three blanks the assigned reply codes relating to rje are general information message time of day etc server availability information ftp commentary or user information rje or batch system commentary or information system status reply file status reply directory listing reply rje system general status reply rje job status reply last command received ok an abort has terminated activity as requested abort request ignored no activity in progress the requested transmission control has taken effect log on completed log off completed goodbye log off noted will complete when transfer done file transfer has started ftp file transfer started ok ftp restart marker reply text is mark yyyy mmmm where yyyy is data stream marker value yours and mmmm is receiver s equivalent mark mine ftp transfer completed ok rename completed holland page rfc remote job entry june delete completed job job id accepted for processing job job id completed awaiting output transfer job job id cancelled as requested job job id altered as requested to state status connection greeting message awaiting input current command not completed may be sent after suitable delay if no crlf enter password may be sent with hide your input mode input has never specified an inpath this service is not implemented this service is not accepting log on now goodbye log on time or tries exceeded goodbye log on unsuccessful user and or password invalid user not valid for this service log out forced by operator action please phone site log out forced by system problem service shutting down goodbye rje could not log on to remote ftp for input transfer rje could not access the specified input file through ftp rje could not establish host socket input connection rje could not log on to remote ftp for output delivery rje could not access file space given for output rje could not establish host socket output connection ftp the named file does not exist or access denied ftp the named file space not accessible by you ftp transfer not completed data connection closed ftp transfer not completed insufficient storage space job input not completed abort performed job format not acceptable for processing cancelled job previously accepted has mysteriously been lost job previously accepted did not complete job id referenced by status cancel alter change or transmission control is not known or access denied requested alteration not permitted for the specified job un deliverable un claimed output for job id discarded last command line completely unrecognized syntax of the last command is incorrect last command incomplete parameters missing last command invalid illegal parameter combination last command invalid action not possible at this time last command conflicts illegally with previous command s requested action not implemented by this server holland page rfc remote job entry june sequencing of commands and replies the communication between the user and server is intended to be an alternating dialogue as such the user issues an rje command and the server responds with a prompt primary reply the user should wait for this initial success or failure response before sending further commands a second type of reply is sent by server asynchronously with respect to user commands these replies report on the progress of a job submission caused by the input command and as such are secondary replies to that command the final class of server replies are strictly informational and may arrive at any time these replies are listed below as spontaneous command reply correspondence table command success fail user pass bye inid inpass inpath input sec input retrieval sec job execution sec output transmission abort input outuser outpass out change restart recover back skip abort output hold status xx cancel alter op spontaneous xx note for commands appearing on cards the is not sent but the errors may be asynchronously sent holland page rfc remote job entry june typical rje scenarios tip user wanting hot card reader to hostx a tip user opens telnet connection to hostx socket b commands sent over telnet to rje user myself pass dorwssap out port input port c rje server connects to the user s host port and begins reading when end of job card is recognized the job is queued to run the connection to the card reader is still open for more input as another job d the first job finishes a connection to the users host port is established by rje server and the output is sent as an nvt stream e continue at any time with another deck at step c tip with job at a time card reader a thru d the same but user closes reader after the deck e the output finishes and the printer connection closes f input may be typed any time after step c finishes and another job will be entered starting at c hosta user runs job at hostc input from hostb a user telnet connects to hostc socket for rje user roundabout pass aaabbbc outuser roundab out e sysprinter out puncher s hostb ne my savepunch inuser rounder inpass x x x input hostb e my jobinput b the rje server has ftp retrieve the input from hostb using userid of rounder and password of x x x for file named my jobinput c the job finishes rje server uses ftp to send two files the print output is sent to hosta in ebcdic with asa carriage control to file sysprinter while the file known as puncher is sent to hostb in ebcdic without carriage control to file my savepunch d when the outputs finish rje server at hostc discards the print file but retains the puncher file e the user who had signed out after job submission has gotten his output and checked his file my savepunch at hostb he deletes the saved copy at hostc by re calling rje at hostc user roundabout holland page rfc remote job entry june pass aaabbbcc abort job puncher or by change job puncher d holland page 