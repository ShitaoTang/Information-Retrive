 network working group jon postel request for comments ucla nmc nic april references rfc and nic telnet protocol at the october network working group meeting i promised to promptly produce a document which clearly and succinctly specified and explained the official telnet protocol this document fails to meet any part of that promise this document was not produced promptly this document is neither clear nor succinct there is no official telnet protocol the following pages present my understanding of the ad hoc telnet protocol there are some who have serious questions about this protocol the proposed changes to the protocol are given in section iv any comments should be promptly directed to me via the network information center ident jbp or by phone or by mail jon postel spade group boelter hall ucla los angeles california postel page rfc telnet protocol april i definition of the network virtual terminal the network virtual terminal nvt is a bi directional character device the characters are represented by bit codes the nvt has no timing characteristics the character codes through are the usascii codes note all code values are given in decimal the codes through are used for special control signals the nvt is described as having a printer and a keyboard the printer responds to incoming data and the keyboard produces outgoing data the printer the nvt printer has an unspecified carriage width common values are the printer can produce representations of all usascii graphics codes through of the usascii control codes through and the following have specific meaning to the nvt printer name code meaning null nul a no operation bell bel produces an audible or visible signal back space bs backspaces the printer one character position horizontal tab ht moves the printer to next horizontal tab stop line feed lf moves the printer to next line keeping the same horizontal position vertical tab vt moves the printer to the next vertical tab stop form feed ff moves the printer to the top of the next page carriage return cr moves the printer to the left margin of the current line the remaining usascii codes through through and do not cause the nvt printer to take any action postel page rfc telnet protocol april the keyboard the nvt keyboard has keys or key combinations or key sequences for generating all of the usascii codes note that although there are codes which have no effect on the nvt printer the nvt keyboard is capable of generating these codes the end of the line convention the end of a line of text shall be indicated by the character sequence carriage return line feed cr lf this convention applies to both the sending keyboard and receiving printer virtual mechanisms break and reverse break the telnet control signals provide a break signal which can be used to simulate the use of the break or attention or interrupt button found on most terminals this signal has no effect on the nvt when the break telnet control signal is used from server to user it is sometimes called reverse break such a reverse break has no effect on the nvt ii definition of telnet protocol the purpose of telnet protocol is to provide a standard method of interfacing terminals devices at one site to processes at another site the telnet protocol is built up from three major substructures first the initial connection protocol icp second the network virtual terminal nvt and third the telnet control signals described herein telnet user and server processes follow the icp to establish connections the term logger has been associated with the set of processes in the serving system which respond to the icp and perform the initial interactions e g obtain a name and password the icp is defined and the initial socket number and byte size parameters are defined in current network protocols nic the data transmitted between the user and server programs and vice versa is treated as a character stream with embedded control signals note that all code values are given in decimal postel page rfc telnet protocol april telnet control signals name code meaning data mark used to mark a point in the data stream used in conjunction with ins see synch break user to server has the same meaning to the server as the break interrupt or attention button found on many terminals server to user has the same meaning to to use as the reverse break used with some terminals nop no operation no echo user to server asks the server not to return echos of the transmitted data server to user states that the server is not sending echos of the transmitted data sent only as a reply to echo or no echo or to end the hide your input echo user to server asks the server to send echos of the transmitted data server to user states that the server is sending echos of the transmitted data sent only as a reply to echo or no echo hide your input the intention is that a server will send this signal to a user system which is echoing locally to the user when the user is about to type something secret e g a password in this case the user system is to suppress local echoing or overprint the input or something until the server sends a noecho signal in situations where the user system is not echoing locally this signal must not be sent by the server ins this is the interrupt on send signal defined by the host to host protocol and implemented by the network control program ncp see synch postel page rfc telnet protocol april synch this is a condition indicated by the combination of the data mark and the ins user to server the server is to examine the input data stream looking for a data mark signal if a data mark is found the server must not process further until an ins is received if the server receives an ins it is required to examine the data stream at once taking any appropriate action on break type characters e g etx sub break up to a data mark signal and thereupon continue its normal processing the passed over characters may be discarded server to user if the user finds a data mark in the data stream it must wait for an ins if the user receives an ins it must examine and discard characters up to and including a data mark data types telnet normally deals in ascii characters but there are provisions for escaping to other code sets if one of these escapes is used it is undefined here whether or not the telnet signals still have meaning or even how to return to the ascii set the telnet signals used to indicate a change of code set are code meaning ascii standard telnet transparent ebcdic user telnet signals the following signals are to be available to the human user to cause the user telnet to take the indicated action transmit now transmit all data entered and locally buffered now intended to be used with line mode suppress end of line transmit all data entered and locally buffered now and do not transmit the end of line immediately following this signal postel page rfc telnet protocol april standard telnet implementation using site user is able to enter and transmit all ascii codes user is able to cause the telnet signals break synch echo and noecho to be transmitted provides for the user telnet signals e g transmit now implements the cr lf end of line convention provides local echo for local user terminals correctly processes the telnet signals break synch nop echo noecho and hide your input received from the server serving site provides a mapping between ascii and the local character set correctly processes the telnet signals break synch nop noecho and echo implements the cr lf end of line convention assumes the using site provides echoing may provide a server echo mode minimum telnet implementation using site user must be able to enter and transmit all ascii codes ignore and delete all telnet signals from the serving site provide local echo for local user terminals implements cr lf end of line convention provide for the user telnet signals postel page rfc telnet protocol april serving site provide a mapping between ascii and the local character set ignore and delete all telnet signals from the using site assume the using site provides echoing implements the cr lf end of line convention iii discussion of telnet protocol the use of a standard network wide intermediate representation of terminal code between sites is intended to eliminate the need for using and serving sites to keep information about the characteristics of each other s terminals and terminal handling conventions this approach can be successful but only if the user the using site and the serving site assume certain responsibilities the serving site must specify how the intermediate code will be mapped by it into the terminal codes that are expected at that site the user must be familiar with that mapping the using site must provide some means for the user to enter all of the intermediate codes and as a convenience special telnet signals as well as specify for the user how the signals from the serving site will be presented at the user terminal other schemes were considered but rejected for example a proposal that the using site be responsible for translating to and from the code expected by the serving site was rejected since it required that the using site keep tables of all serving site codes and provide a mapping for each case the information would require constant maintenance as new hosts were added to the network character set since it is not known how the current or future sites will specify the mapping between the network wide standard code bit ascii in an bit field and the codes expected from their own terminals it seems necessary to permit the user to cause transmission of every one of the ascii codes plus for full user power selected signals either of a telnet control nature or of a special terminal nature such as break or attention postel page rfc telnet protocol april there was strong feeling about the importance of the user system interface at the using site but equally strong feeling that this problem is one of local implementation and should reflect the using site installation philosophy rather than be subject to network wide standards some topics of consideration in this area are how to represent special graphics not available at the using site at the user s terminal treatment of upper lower case problem on upper case only devices a representing lower case output b providing users with shift and shiftlock signals incorporating editing capability in telnet extending user options in network mode not available to local users e g hold output or kill print permit users to specify how keyboard input is to the translated e g let a character from the terminal cause a specified string to be sent by the user s telnet the proposed solution to the telnet protocol problem seems to provide a mechanism for a minimum implementation while providing a basis for developing richer sets or protocol for present and future use in terminal applications process process communications and use by other conventions to pass data or control information the understanding that ascii be used as a network wide code has been established for some time its use in telnet provided a problem with respect to the limitation of a maximum character set of some systems provide for more than this number in their operation and therefore as serving sites cannot map on a one for one basis each such serving site could probably provide a reasonably useful character set including all system control signals by mapping of its codes and just not provide a network user access to the other codes however any character left out might later be used in a major application at that site as a special control signal this could result in denying network users the facility offered by that application serving sites are therefore encouraged to provide a full mapping between the ascii code and the code used on the serving system this may require that the server specify two character ascii sequences which map to single characters in the servers character set postel page rfc telnet protocol april notice that there are some ascii codes which have no effect on the nvt printer these codes must be transmitted over the network when output by the serving process or by entered by the user end of line convention the representation of the end of a physical line at a terminal is implemented differently on different network hosts for example some use a return or new line key the terminal hardware both returns the carriage or printer to start of line and feeds the paper to the next line in other implementations the user hits carriage return and the hardware returns carriage while the software sends the terminal a line feed the network wide representation is carriage return followed by line feed it represents the physical formatting that is being attempted and is to be interpreted and appropriately translated by both using site and serving site example a multics user is working through the network on some serving site host in the course of the session the user has numerous occasions to hit new line on his model tty each time the multics system is awakened by a new line interrupt the line of buffered characters is passed to telnet where it is scanned for special characters if none is found carriage return followed by line feed is inserted where new line was entered and the line is turned over the ncp for transmission correspondingly when the multics telnet finds the carriage return line feed sequence in the data stream coming from the serving site the two characters are replaced with the appropriate new line code which is sent to the terminal telnet defines the end of a line to be indicated by the ascii character pair cr lr several of the real devices in the world have only a single new line nl function several of the computer systems have in some programs used the cr and lf functions to have semantic meaning larger than the format effect they provide further several computer systems allow the cr and lf functions to be used separately e g such that a line may be overprinted one problem for those telnet user programs required to map the nvt into a device which only has a nl function is how is the cr lf to be dealt with one solution is to examine the character following the cr if an lf is found then perform the nl function if anything else is found then back space to the beginning of the line another problem is the case of a computer system which locally uses period to cause the new line function and which uses in some programs cr and lf for semantically significant operations suppose the user telnet sends the sequence cr lf does this mean new line or the cr operation followed by the lf operation a solution to this problem it to require that telnet programs send a cr not intended to postel page rfc telnet protocol april be part of a cr lf pair as a cr nul pair then the receiving program can always hold a cr and examine the next character to determine if a new line function is intended this solution is strongly recommended one other question arises here is it permitted to send the telnet signal nop code between a cr and a lf when these are intended to signify new line the answer is yes the nop signal may occur anywhere in the data stream echoing the decision to have the assumed condition for echo be that the using site will provide any echo necessary for its terminals was taken because of the difficulties faced by some installations that cannot turn off their echo or that have terminals that print locally as a result of key strokes serving sites could take the position have user turn echo off but this seems an unnecessary burden on the user in addition some serving sites may choose not to supply any echo service in which case the no echo assumption will supply a network wide condition while other assumptions would give a mixed starting condition the convention of using echo no echo signals seems to fill both the requirements for dynamic echo control and for a minimum implementation of telnet protocol note that when the user request echo or no echo the server replies by switching to the desired mode and possibly returning the signal for the new mode or by continuing in the current mode and returning the signal for the current mode the server never spontaneously sends an echo or no echo signal except that a noecho may be used to cancel a hide your input hide your input the hide your input signal presents some difficulty in that it is unclear how much is to be hidden the server site usually knows how long the secret is but the user telnet in general does not furthermore if the user site cannot suppress the local echoing there is a difficult implementation problem one possibility is for the using site to overprint a full line with a mask then have the user type his secret on the mask if the secret were longer than one line the use of the mask should be repeated the use of hide your input can be avoided altogether by having the serving site send a mask which it knows to be just long enough on which the user is to type the secret information postel page rfc telnet protocol april example default assumption is user site is echoing server to user password please cr lf server to user xxxxcriiiiicrmmmmcr nul user to server password cr lf server to user ready cr lf breaks and attentions there is a special control signal on some terminals that has no corresponding bit pattern in ascii but is transmitted by a special electrical signal this control signal is attn on a and break on a teletype this signal is represented by the telnet control signal break there is a corresponding control signal for use from serving sites to using sites for reverse break notice however that the nvt is a bi directional character device thus there is no need to turn the line around some systems treat the break as an extra code available for use in conjunction with the data stream for example one system uses break as a special editing code meaning delete the current line to this point in these cases the code may simply be inserted in the data stream with no special additional action by the user other systems use break or attn in special interrupt fashion to mean stop processing the application and give me the supervisor or cancel the present job etc other systems which inspect input on a character at a time basis use normal characters for this purpose such as in these cases because of differences in the ways both serving and using sites operate it is necessary to take a route in addition to the normal telnet data stream to indicate that the special control signal is embedded in the data stream example problem the pdp normally will when it fills its input buffer continue to accept characters from a terminal examining each to see if it is a control character then act on it if it is or throw it away if it is not since the telnet server at the serving site is at the mercy of the ncp with respect to controlling the bunching and therefore arrival at the telnet of bursts of characters telnet postel page rfc telnet protocol april implementations might be expected to choke off flow to the buffers until they are ready to accept characters without throwing them away under this condition the serving process might be outputting to the using terminal the input buffers at the server fill up with user generated characters and get stuck at the user s site in the data stream that has been choked off a similar problem could occur with multics or some ibm system as a line at a time server the user at a using site gets his process at the serving site into an output loop and wants to break the process without having to release his telnet connection the buffers clog the connection transmission is choked off and the break or other user control signal gets stuck in the pipeline example solution the user at the using site knows he is entering a special control signal break attn etc and follows it with a synch the local instructions at using sites for accomplishing this may differ from site to site user to using site telnet send synch using site telnet to serving site telnet data mark in data stream using site telnet to using site ncp send an ins serving site ncp to telnet server interrupt ins received serving site telnet examines the input data stream looking for special control signals until it sees data mark then resumes normal handling thus depending on the server s local implementation to provide adequate service a special handling of the data stream can be invoked whenever an ins is received in order postel page rfc telnet protocol april to get to the special character when it sees data mark it recognizes it as a synchronization point and knowing that the special character has been passed on strips the data mark from the data stream and returns to normal mode if the data mark arrives before the ins the serving site should not process the data stream further until an ins is received this approach to handling selected special characters or signals relieves the using telnet processes from having to recognize the special serving site characters as well as from having to know how the serving site wants to handle them at the same time the procedure requires only a minimum level of user understanding of the serving site this seems appropriate since the telnet ascii conventions are providing a network virtual terminal not a network virtual user notice that the correct order is special character or signal e g break or then synch user telnet signals the ability of the user to cause the using site telnet to send any combination of ascii characters in a string and only that combination is viewed as important to the user utility of the telnet ascii conventions because of this some user sites may find it necessary to provide special local telnet signals from the human user to the using site telnet example a user on a line at a time system multics system gcos etx which require an end of line signal before processing the user s input is working through the network on a serving site that operates a character at a time the application is a debugging aid that permits the user to type in location to which it will respond with n where n represents the current contents of that location the serving site process does not expect to see the location followed by a carriage return line feed sequence the user at the using site should be able to type in the location follow it with a signal to the user telnet to suppress the end of line convention followed by the end of line signal and expect the location to be transmitted immediately without an end of line sequence being transmitted to the server postel page rfc telnet protocol april example in another case a using site has decided that it is convenient to accumulate four characters at a time and transmit them to the serving site unless an end of line signal is observed in which case the end of line sequence is sent preceded by whatever number of characters have been accumulated presumably three or less in the same debugging application the address is such that the end does not correspond with the four character buffer demarcation the user should have the ability to enter a code for transmit immediately in place of the end of line signal in order to preserve neat formatting and expect the address to be sent to the serving site telnet signals have been discussed and those introduced to date are probably sufficient for an implementation of telnet ascii convention terminology ascii the usascii character set as defined in nic in telnet protocol where eight bit codes are used the lower half of the code set is defined to be ascii echoing the display of a character entered is called echoing there are two modes in which this happens if the device used to enter characters displays the character before or as it transmits the character to the computer the echoing mode is called local echo if on the other hand the device transmits the entered character to the computer without displaying it and the computer then transmits a character to the device for the echo display this echoing mode is called remote echo character mode in this mode of operation telnet transmits each character as soon as possible generally speaking character mode is used when all of the using terminal using system and serving system are operating in a remote echo mode the echos to the user entered characters are transmitted from the serving system i e over the network line mode in this mode of operation telnet transmits groups of characters which constitute lines generally speaking this mode is used when one or more of the using terminal using system or serving postel page rfc telnet protocol april system is operating in a local echo mode the echos to the user entered characters are not transmitted over the network full duplex this term indicates a transmission procedure using a four wire connection which permits simultaneous transmission in both directions half duplex this term indicates a transmission procedure using a two wire connection which requires that data be transmitted in only one direction at at time note that half duplex devices usually are also local echo but that full duplex devices may be either local echo or remote echo iv proposed changes to telnet protocol the changes suggested here are not my ideas thus the presentation may be faulty i welcome rfc or other communication suggesting other changes or better arguments for and against these changes echoing it is proposed to delete from telnet the control signals echo noecho and hide your input for server systems which do not provide echoing these commands are useless for server systems which do provide echoing experience has shown that the control is most effectively provided by server system commands data types it is proposed to delete all mention of data types from telnet either the character stream is ascii or its not a telnet communication if it is really necessary to change the data type a command in ascii could be sent in the data stream minimum implementation it is proposed that the minimum implementation require the user telnet to allow the user to send and the server telnet to correctly process all the telnet control signals postel page rfc telnet protocol april the work on telnet protocol has involved many people this document is taken from rfc s and by tom o sullivan others who have served on committees are bob bressler mit dmcg will crowther bbn bob long sdc alex mckenzie bbn john melvin sri arc bob metcalfe mit dmcg ed meyer mit multics tol o sullivan raytheon mike padlipsky mit multics jon postel ucla nmc bob sundberg harvard joel winett ll steve wolfe ucla ccn this rfc was put into machine readable form for entry into the online rfc archives by kelly tardif viaginie postel page 