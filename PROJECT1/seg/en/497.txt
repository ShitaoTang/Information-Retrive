 network working group j white request for comments computer research lab ucsb nic august a user telnet description of an initial implementation preface the user telnet described in this document has been implemented within ucsb s online system by mark krilanovich and makes teletype compatible time sharing systems in the net accessible to online system users contents page i function ii invoking telnet iii the virtual teletype iv returning to telnet v breaking telnet connections vi abnormal network conditions figures page figure network sites figure telnet character set figure connect error codes figure input error codes figure output error codes i function this document describes a program whose function is to make an online system terminal appear to any teletype compatible time sharing system in the network as if it were directly connected to that system by invoking this program from his terminal an ols user can effectively dial up a system at another site and use it as if he were a local user of that system the program performs the following major functions it resolves keyboard and display device incompatibilities performs character set transformations and white page rfc a user telnet august makes its presence and that of the network transparent to the user the program which performs these functions is called a user telnet it operates in conjunction with another program called a server telnet executing at the site whose system is being used a server telnet exists at each site whose system is accessible from the net similarly a user telnet must exist at a site before users at that site have access to remote systems user and server telnets access the net through their respective ncps and operate under a network standard protocol which specifies the hand shaking procedure by which the two parties connect themselves to one another as well as the format of data sent over a pair of network connections established between them a user telnet makes such protocol considerations transparent to its users the telnet protocol is based upon the notion of a virtual teletype employing a bit ascii character set the primary function of a user telnet then is to provide the means by which its users can hit all the keys on that virtual teletype if the user s keyboard happens in fact to actually be a teletype then the mapping procedure is a very simple one however in ucsb s case where a user s input device is an ols keyboard a device very different from a teletype the mapping is more complex the primary function of a server telnet is to map the keys on the virtual teletype into that set of keys its local users can push on their keyboards again if those keyboards are teletypes the mapping done by the server telnet is straightforward in other cases the task may be very complex a similar set of mappings transforms ouput generated by the remote system into a form displayable on the user s output device in ucsb s case this device is normally a storage scope ii invoking telnet this and succeeding sections describe a preliminary version of a user telnet hereafter referred to simply as telnet currently implemented within the online system this initial implementation does not provide all of the services that a final version must provide nor does it provide all the conveniences that the next version will offer it s a first pass which will be upgraded in the near future white page rfc a user telnet august telnet is accessible from net a subsystem like molsf and col of ols a user is by default prohibited from loading net to have access to net enabled fro his user number a user need only contact the computer center assuming the foregoing net can be loaded with the key sequence keyboard entry ols query response syst work areas updated load net load net return file loaded or by specifying the system name net at login once in net telnet is invoked by going to level ii real and hitting log telnet responds with a query for site number the user should enter in decimal the number of the site as indicated in figure to which he desires access followed by return telnet will then query the user for the server telnet s socket number by convention this number is normally but in certain cases some other socket may be appropriate in any case the user should enter the socket number in decimal and hit return the dialogue then goes like this keyboard entry ols query response ii log foreign site no site number site number return foreign sck no return when the second return is depressed telnet will attempt to contact the designated server telnet and establish a duplex connection for the user once the connection has been established telnet will erase the tube and position the carriage to the upper left hand corner of the screen from this point on the user is effectively connected to the remote system telnet enters a mode in which keys pushed by the user are mapped into their virtual teletype equivalents and incoming text similarly transformed and displayed on the scope if the remote system to which the user is connected normally issues a login message that message will be the first to be displayed in any case the user should proceed by logging in to the remote system according to the conventions appropriate to that system white page rfc a user telnet august figure network sites institution location computer site site site name hex dec ucla los angeles sigma ucla ucla los angeles ibm ucl stanford research institute menlo park pdp sri stanford research institute menlo park pdp sri ucsb santa barbara ibm ucsb university of salt lake city utah utah pdp utah bolt beranek cambridge and newman mass pdp bbn bolt beranek cambridge and newman mass ddp bbn mit cambridge mass ge mit mit cambridge mass pdp mit rand corporation santa monica ibm rand ibm system development corporation santa monica ddp sdc ibm harvard cambridge university mass pdp hrv harvard cambridge university mass pdp hrv white page rfc a user telnet august lincoln lexington laboratory mit mass ibm lino a lincoln lexington laboratory mit mass tx lin a stanford university stanford pdp stan b university of urbana ill pdp ill c illinois case western resevrve cleveland university ohio pdp case d carnegie mellon pittsburgh university pa pdp carn e burroughs paoli pa b burr f illiac iv iii the virtual teletype the algorithm by which telnet maps the ols keyboard into the virtual teletype s character set and by which it maps that same character set into the set of characters which can be displayed on the user s storage scope is defined in figure a line of that figure reads as follows for line the key labeled lf meaning line feed on the virtual teletype sometimes referred to as control j is struck by pressing either sub case j or on an ols keyboard telnet sends to the remote system an bit character with the value x a whenever lf is received from the foreign system telnet displays it by rolling the carriage down one line as indicated in the figure case substitutes for the cntrl key on a teletype hence for example control c is represented by the key pair case c note however that case and c are hit in sequence whereas on a teletype the cntrl key is held down while c is struck case a case z each have an equivalent on the upper keyboard and the position of that key on the upper keyboard corresponds to that of its counterpart on the lower keyboard hence ls equivalent to case a white page rfc a user telnet august although telnet provides the user with the means for transmitting both upper and lower case alphabetics hitting a sends a lower case a holding down shift and hitting a sends upper case a there is no provision in ols for displaying lower case characters on the storage scope hence telnet maps lower case alphabetics into upper case before displaying them the four virtual teltype keys enq ack bel and nak are displayed by telnet in a special manner two lines are reserved for these characters at the top of the display area and whenever telnet receives such a character from the remote system it displays it in its assigned position within the two line field telnet always positions those four characters at the top of the display area regardless of the user s current position on the scope then returns to it a storage scope has both positive and negative attributes relative to a teletype display is much quieter on a scope than on a teletype however the noise made by the return of a teletype carriage is often a valuable cue to the user frequently signifying that the previous line of input from the user has been accepted by the system as a substitute for this particular cue telnet displays an underline at the left edge on the next line whenever it receives a carriage return cr from the remote system figure telnet character set to also push or code sent upon receipt send explanation known as either is in hex displayed as nul null soh start of a ls case a heading stx start of text b atan case b etx end of text c log case c eot end of transmission d refl case d enq enquiry e case e ack acknowledge f up case f bel bell g down case g white page rfc a user telnet august bs backspace h eval case h ht horizontal tab i inv case i tab lf line feed j sub case j a carriage rolled down vt vertical tab k max case k b ff form feed l mod case l c cr carriage return m del case m d carriage return returned so shift out n arg case n e si shift in o diff case o f dle data link escape p sum case p dc device control q case q dc device control r case r dc device control s rs case s dc device control t sq case t nak negative acknowledge u conj case u syn synchronous idle v exp case v etb end of transmission block w case w can cancel x cos case x white page rfc a user telnet august em end of medium y sqrt case y sub substitute z sin case z a esc escape alt mode neg b fs file prod c separator gs group sort d separator rs record conv e separator us unit pwr f separator sp space space blank exclamation point quotation diaeresis marks number sign dollar sign percent ampersand apostrophe acute accent closing single quote opening parenthesis closing parenthesis asterick a white page rfc a user telnet august plus b comma cedilla c hyphen minus d period decimal e point slant f colon a semicolon b less than c equals d greater than e question mark f commercial at opening b bracket reverse slant case c closing d bracket circumflex e underline f grave accent opening case single quote opening brace case b vertical line c closing brace case d white page rfc a user telnet august tilde overline e general accent del delete rubout back f numerics a z upper case shift a a z alphabetics a z a z lower case a a z alphabetics a z table notes down arrow superscript superscript circle with dot in the middle superscript superscript circle with plus in the middle circle with slash in the middle superscript notes for figure telnet character set superscript all of the following keys send null set clr cent sign superscript superscript a is read control a same for b c etc superscript enq ack bel and nak are displayed as and respectively in an area at the top of the screen reserved especially for those characters superscript a is sent by hitting th keys case and a in turn same for b c etc superscript upper case a is sent by holding down the shift key while a is struck same for upper case b c etc white page rfc a user telnet august superscript cr also causes an underline to be displayed in the left margin as a substitute for the often useful cue provided by the noisy return of a teletype carriage a storage scope is also a much faster display device than a teletype however in some situations this apparent attribute can be troublesome in particular when a system displays a whole series of lines of text without requiring input from the user the display may be wrapped around from the bottom of the scope to the top and begin overlaying itself before the user has had some time to read it all in such cases the following strategy is sometimes useful and will make sense once the next section section iv has been read hit ii before the display begins to wrap around upon itself the display will stop after the text has been read erase the scope and hit log and display will resume if the user hits erase while in telnet that key will have its usual effect it will have no effect upon the remote system however because of a quirk in the current implementation of telnet erase will have the one additional effect of causing the display of incoming text to be suspended until another key on the virtual teletype is struck the user is thus cautioned against erasing the scope while waiting for a response from the remote system however the user can extricate himself from the situation described by following the erase with nul on the virtual teletype iv returning to telnet the user can at any time escape from telnet and hence from the remote system to which he is attached by depressing a level key e g i ii syst type list or of course by hitting reset any time thereafter the user may return to telnet by hitting ii log on net once again and resume operation on his remote system exactly where he left off when ii log is pressed this second time instead of querying the user for site number as before telnet will notice that the user is already connected to a remote system and simply resume where it left off after he escapes from telnet and before he returns to it the user may engage himself in any other online system activity short of logging out but including changing systems while still retaining the option of subsequently returning to telnet and resuming activity on the remote system to which he remains connected the user can exploit this property of telnet to obtain hard copy of a selected portion of his dialogue with the remote system the user simply brings his system to the point at which a listing is thereby desired escapes from telnet by hitting type sel return thereby white page rfc a user telnet august selecting the line printer as a secondary output device and then returns to telnet by pressing ii log all subsequent communication with the remote system will be recorded for eventual output on the printer logging off of ols while escaped from telnet causes the telnet connection to be broken automatically by the system v breaking telnet connections at any time while the user is in contact with telnet after the connection to the remote system has been established the user may terminate that connection by hitting con return telnet will respond sockets purged subsequent call to telnet i e a subsequent instance of ii log will illicit the original query for remote site number the user is then free to connect himself to another foreign system the user is cautioned that breaking network connections as just described is not necessarily equivalent to logging out of the remote system some server telnets may when they detect the breaking of connections log the user off of their system others may leave the user logged on the user should be aware of the conventions of the systems he uses and where appropriate log himself off before breaking connections the key sequence i del return will also terminate a telnet connection but all other connections that may have been previously established using the operators of level i are closed as well vi abnormal network conditions while the user is in telnet and attached to a remote system telnet monitors the user s network connections if any abnormal condition is detected it terminates its monitoring and issues a message of the form connect input error code n output where n is one of the values listed in figures a connect error may occur during telnet s initial attempt to establish connections to the remote system an input error may occur when telnet attempts to extract incoming data from the net and an output error may occur as telnet tries to insert outgoing data into the net white page rfc a user telnet august figure connect error codes a previous invocation of telnet left a local receive socket open the send socket is closed hit i del return a previous invocation of telnet aborted and i del return failed to close the network connections the remote site is probably dead all communication paths between ucsb and the specified remote site are in use ucsb s ncp is running at capacity or is drained or stopped the connection attempt was refused by the remote site no such remote site remote site was discovered to be dead the operator has stopped or reset the ncp either the specified remote site is not accepting input from the net or there was a failure in the subnet the specified remote site has broken all existing connections to ucsb the remote site is known to be dead figure input error codes connections to the server telnet at the remote site have been broken connections to the server telnet at the remote site are being broken an interrupt was sent by the remote system resume by hitting log white page rfc a user telnet august figure output error codes connections to the server telnet at the remote site have been broken connections to the server telnet at the remote site are being broken same as remote site has died the operator has stopped or reset the ncp an interrupt was sent by the remote system resume by hitting log either the remote site has stopped accepting input from the net or there was a failure in the subnet same as the remote site has broken all existing connections to ucsb white page 