 network working group june request for comments abhay bhushan mit nic bob braden ucla categories d d and d will crowther bbn updates eric harslem rand obsolete none john heafner rand alex mckenzie bbn john melvin sri bob sundberg harvard dick watson sri jim white ucsb the file transfer protocol page nwg rfc i introduction the file transfer protocol ftp is a user level protocol for file transfer between host computers including terminal imp s on the arpa computer network the primary function of ftp is to facilitate transfer of files between hosts and to allow convenient use of storage and file handling capabilities of other hosts ftp uses the data transfer protocol described in rfc to achieve transfer of data this paper assumes knowledge of rfc the objectives of ftp are to promote sharing of files computer programs and or data encourage indirect use without login or implicit of computers and shield the user from variations in file and storage systems of different hosts to the extent it is practical these objectives are achieved by specifying a standard file transfer socket and initial connection protocol for indirect use and using standard conventions for file transfer and related operations ii discussion a file is considered here to be an ordered set of arbitrary length consisting of computer including instructions data files are uniquely identified in a system by their pathnames a pathname is loosely defined to be the data string which must be input to the file system by a network user in order to identify a file pathname usually contains device and or directory names and file names in case of named files ftp specifications provide standard file system commands but do not provide standard naming convention at this time each user must follow the naming convention of the file system he wishes to use ftp may be extended later to include standard conventions for pathname structures a file may or may not have access controls associated with it the access controls designate the users access privilege in the absence of access controls the files cannot be protected from accidental or unauthorized usage it is the prerogative of a resident file system to provide protection and selective access ftp only provides identifier and password mechanisms for exchange of access control information it should however be noted that for file sharing it is necessary that a user be allowed subject to access controls to access files not created by him ftp does not restrict the nature of information in the file for example a file could contain ascii text binary data computer program or any other information a provision for indicating data structure type and byte size exists in ftp to aid in parsing interpretation reconfiguration and storage of data to facilitate indirect usage the cooperating file transfer processes may be disowned daemon processes page nwg rfc which listen to agreed upon sockets and follow the standard initial connection protocol for establishing a full duplex connection it should be noted that ftp could also used directly by logging into a remote host and arranging for file transfer over specific sockets ftp is readily extensible in that additional commands and data types may be defined by those agreeing to implement them implementation of a subset of commands is specifically permitted and an initial subset for implementation is recommended the protocol may also be extended to enable remote execution of programs but no standard procedure is suggested for transferring data ftp uses the data transfer protocol specified in rfc as the data transfer protocol does not specify the manner in which it is to be used by ftp implementation may vary at different host sites hosts not wishing to separate the data transfer and file transfer functions should take particular care in conforming to the data transfer protocol specifications of rfc it should be noted that ftp specifications do not require knowledge of transfer modes used by data transfer protocol however as file transfer protocol requires the transfer of more than a single control transaction over the same connection it is essential that hosts be able to send control transactions in either transparent block type b of descriptor and counts type ba modes type bb the indefinite bit stream mode is not suitable as it limits transfer to singles transactions the use of data transfer aborts type b is neither required nor defined in ftp ftp has its own error terminate which may be used to abort a file transfer request ftp also does not define the structure of files and there are no conventions on the use of group record and unit separators a file separator is however used to indicate the end of file it is strongly recommended that default options be provided in implementation to facilitate use of file transfer service for example the main file directory on disk a pool directory user directory or directory last accessed could serve as standard pathname defaults default mechanisms are convenient as the user doesn t have to specify the complete pathname each time he wishes to use the file transfer service iii specifications data transfer ftp uses the data transfer protocol described in rfc for transferring data and or control transaction both data and control transactions are communicated over the same connection page nwg rfc data transactions data transactions represent the data contained in a file there is no data type or byte size information contained in data transactions the structure of data is instead communicated via control transactions a file may be transferred as one or more data transactions the protocol neither specifies nor imposes any limitations on the structure record group etc or length of file such limitations may however be imposed by a serving host the end of a file may be indicated either by a file separator as defined in data transfer protocol or by closing connection in type b in particular a serving or using host should not send the etx or other end of file character unless such a character is part of the data in file i e not provided by system control transactions the control transactions may be typified as requests identifiers and terminates a request fulfillment sequence begins with a request and ends with receipt of data followed by end of file or a terminate a op codes control transactions are distinguished by their first byte referred as op code a standard set of opcodes is defined below implementation of a workable subset of opcodes is specifically permitted additional standard opcodes may be assigned later opcodes hex a octal through hex ff octal are for experimental use page nwg rfc op code operation hex octal change data type identifier retrieve request store request replaced if file already exists delete request rename from request rename to request list file directory request username identifier password identifier error or unsuccessful terminate acknowledge or successful terminate b append request add to existing file c through through reserved for standard assignment f a through through reserved for experimental use ff page nwg rfc b syntax and semantics b data types the change data type control transactions identifies the structure of data data type and byte size in succeeding data transactions this transaction shall contain two more bytes in addition to the opcode byte the first of these bytes shall convey a data type or code information and the second byte may convey the data byte size where applicable this information may be used to define the manner in which data is to be parsed interpreted reconfigured or stored change data type need be sent only when structure of data is changed from the preceding although a number of data types are defined specific implementations may handle only limited data types or completely ignore the data type and byte size descriptors even if a host process does not recognize a data type it must accept data i e there is no such thing as a data type error these descriptors are provided only for convenience and it is not essential that they be used the standard default is to assume nothing about the information and treat it as a bit stream binary data byte size whose interpretation is left to a higher level process or the user it is however possible that this bit stream is treated like ascii characters in specific instances such as transmitting a file to a line printer page nwg rfc the following data type codes are currently assigned where a byte size is not implicit in data type it may be provided by the second byte hex octal bit stream standard default none binary data bytes network ascii characters ebcdic characters dec packed ascii five bit characters th bit or decimal numbers net ascii octal numbers net ascii hexadecimal numbers net ascii through through reserved for standard assignment f a through through reserved for experimental use ff b requests and identifiers retrieve delete name from rename t and append requests contain a pathname following the op code in the information field a pathname may also follow the opcode in list file directory request a pathname must uniquely identify a file in the serving host the syntax of pathnames and identifying information shall conform to serving host conventions except that standard network ascii as defined in the telnet protocol shall be used page nwg rfc the store request has a byte bits allocate size field followed by pathname allocate size indicates the number of bits of storage to be allocated to the file a size of zero indicates that server should use his default retrieve request achieves the transfer of a copy of file specified in pathname from serving to using host the status and contents of file in serving host should be unaffected store request achieves the transfer of a copy of file specified in pathname from using to serving host if file specified in pathname exists on serving hosts then its contents shall be replaced by the contents of the file being transferred a new file is created at the serving host if the file specified in pathname does not exist append request achieves the transfer of data from using to serving host the transferred data is appended to file specified in pathname at serving host rename from and rename to requests cause the name of the file specified in pathname of rename from to be changed to the name specified in pathname of rename to a rename from must always be followed by a rename to request delete request causes file specified in pathname to be deleted from the serving host if an extra level of protection is desired such as the query do you really wish to delete this file it is to be a local implementation in the using system such queries should not be transmitted over network connections username and password identifiers contain the respective identifying information normally the information will be supplied by the user of the file transfer service these identifiers are normally sent at the start of connection b error and acknowledge terminates the error transactions may have an error code indicated by the second descriptor byte transmission of an error message in text is also permitted the following error codes are defined page nwg rfc error code nd descriptor byte meaning hex octal error condition indicated by computer system external to protocol name syntax error access control violation abort allocate size too big allocate size overflow improper order for transactions opcode not implemented file search failed error described in text message ascii characters follow code at present no completion codes are defined for acknowledge it is assumed that acknowledge refers to the current request being fulfilled order of transactions a a certain order of transactions must be maintained in fulfilling file transfer requests the exact sequence in which transactions occur depends on the type of request as described in section b the fulfilling of a request may be aborted anytime by either host as explained in section c b identifier transactions change data type username and password may be sent by user at any time the usual order would be a username transaction followed by a password transaction at the start of the connection no acknowledge is required or permitted the identifiers are to be used for default handling and access control page nwg rfc retrieve and list file directory requests cause the transfer of file from server to user after a complete file has been transferred the server should indicate end of file by sending cls or file separator to complete the request fulfillment sequence as shown below read list file directory request user server end of file indication store and append requests cause the transfer of file from user to server after a complete file has been transferred the user should send an end of file indication the receipt of the file must be acknowledged by the server as shown below user store append request server end of file indication acknowledge rename from request must be followed by a rename to request the request must be acknowledged as shown below user rename from request server rename to request acknowledge the delete request requires the server to acknowledge it as shown below user delete server acknowledge error transactions may be sent by either host at any time and these terminate the current request fulfillment sequence page nwg rfc c aborts either host may abort a request fulfillment sequence at any time by sending an error terminate or by closing the connection ncp to transmit a cls for the connection cls is a more drastic type of abort and shall be used when there is a catastrophic failure or when abort is desired in the middle of a long transaction the abort indicates to the receiving host that sender of abort wishes to terminate request fulfillment and is now ready to initiate or fulfill new requests when cls is used to abort the using host will be responsible for reopening connection the file transfer abort described here is different from the data transfer abort which is sent only by the sender of data the use of the data transfer abort is not defined in this protocol initial connection cls and access control a there will be a preassigned permanent socket number for the cooperating file transfer process at the serving host the connection establishment will be in accordance with the standard initial connection protocol establishing a full duplex connection b the connection will be broken by trading a cls between the ncp s for each of the two connections normally the user will initiate cls cls may also be used by either user or server to abort a transaction in the middle if cls is received in the middle of transaction the current request fulfillment sequence will be aborted the using host will then reopen connection c it is recommended that identifier user name and password transactions be sent by user to server at the start as this would facilitate default handling and access control for the entire duration of connection the identifier transactions do not require or permit and acknowledge and the user can proceed directly with requests if the identifier information is incorrect or not received the server may send an error transaction indicating access control violation upon subsequent requests notes alex mckenzie bbn is conducting a survey of network file systems to determine the practicality of standard pathname conventions and to disseminate information to network users on host file systems page nwg rfc this initial subset represents control functions necessary for basic file transfer operations and some elementary file manipulation operations there is no attempt to provide a data management or complete file management capability it is possible that we may at a later date assign meaning to these information separators within ftp a workable subset is any request plus terminates identifiers may be required in addition when using protected file systems it is however possible that this bit stream is treated like ascii characters in specific instances such as transmitting a file to a line printer it seems that socket has been assigned to logger socket seems a reasonable choice for file transfer rfc or any subsequent standard applicable in initial connection to loggers this rfc was put into machine readable form for entry into the online rfc archives by glenn forbes fleming larratt page 