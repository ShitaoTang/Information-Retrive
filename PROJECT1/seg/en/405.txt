 network working group b bressler request for comments b thomas nic bbn march ftp server server interaction ii at the recent ftp meeting at bbn in cambridge one of the topics discussed was that of server server interaction in a typical situation a user a conversing with two servers b c is interested in retrieving a file from one site b and sending it to the other c user a control control server data server b c the consensus of the meeting was that mechanisms were necessary to make b and c aware of each other and to allow a data connection to be established without forcing each other to queue rfcs for local sockets before they exist the proposed solution to this problem was a command called passive pasv the following is our conclusion as to the meaning of the command and how it would be used third party connections would be established using the sock command which says be prepared to use socket s at host h to establish your data connection and the pasv command which says open your data socket for listening and upon receipt of a transfer command wait for an rfc rather than initiating one a positive acknowledgement to the pasv command indicates that the data socket has been opened for listening when an rfc for its data socket arrives after it has positively acknowledged a pasv command the server should respond with a matching rfc to open the data connection assuming of course that the incoming rfc is consistent with the previous sock commands if any bressler page rfc ftp server server interaction ii march user process a telnet telnet server data sockets data socket server b sb sc c user a to server b user a to server c a b sock host c skt sc a c sock host b skt sb b a ack c a ack a b pasv b a ack a b stor a c rtrv after the pasv command has been acknowledged the two data transfer commands can be sent in either order since the listening action takes place with the pasv command the user knows the socket numbers sc and sb to be the data sockets as specified by the protocol note that it is not essential for a sock command to be sent to the same host to whom a pasv will be sent sending one to him provides security in that the incoming rfc can be checked rb nlg this rfc was put into machine readable form for entry into the online rfc archives by helene morin via genie bressler page 