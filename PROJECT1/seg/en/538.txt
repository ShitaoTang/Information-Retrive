 network working group r t braden request for comments ucla ccn nic december categories d obsoletes none updates rfc netrjt remote job service protocol for tips a introduction tip s have very limited processing capability their function is mainly limited to interfacing printer keyboard devices to the network using telnet protocol it will also be possible to have a tape drive on a tip using a subset of the count form of dtp see rfc however tip s cannot and will not support either dtp or ftp see rfc in general therefore tip users are excluded from using any existing remote job entry protocol e g ccn s netrjs see rfc it appears however that it may be feasible in the future to use tip s for remote job entry in one or more of the following three ways a attach local card readers line printers and card punches directly to tip ports these devices would use a telnet like format and frame their characters with start stop bits bbn can now supply a suitable lpm printer and is searching for suitable readers and punches b connect a remote batch terminal to a full duplex tip port via a communication line bbn is looking into this c use the tape drive and do card to tape and or tape to print on another computer bbn hopes to make case b look exactly like a to the server host that is the remote batch terminal will send to and receive from the server in a telnet like format the printer card reader punch and operator console connections will all use different sockets but one hardware port at the tip which will map multiple sockets into the one port note by telnet like format we mean a cr lf used to delimit logical records lines or cards and b the ascii or ebcdic format effector control characters used for carriage control in the printer stream it does not necessarily imply ascii character codes page this rfc was put into machine readable form for entry into the online rfc archives by bbn corp under the direction of alex mckenzie this document describes netrjt a modification of ccn s netrjs protocol specifically to provide remote job entry service to tip s using one of the methods a b or c netrjt follows the general model of netrjs use telnet protocol over a primary or operator connection pair and open simplex secondary connections for data transfer of job stream input and output we also considered the possibility of using the divert output mechanism of the tip for sending remote job output over the operator connection and an analogous mechanism for input however in discussion with alex mckenzie it was agreed that sharing the operator connections has little merit and causes lots of problems netrjt differs in two principal ways from netrjs the netrjt server process initiates the data transfer connections under control of commands from the remote operator console on the other hand under netrjs the remote user process has responsibility for initiating the opening of secondary data transfer connections the netrjs server simply listens on these sockets netrjt provides the telnet like format defined above for data transfer as well as the tip tape dtp format netrjs on the other hand is restricted to counts to delimit logical records within dtp like transactions and asa carriage control there are some other minor differences for example the netrjt server takes responsibility for folding output records when they exceed a size specified by a user command under netrjs this was the user process responsibility there are netrjt operator commands to set the record format record size and code for each data transfer connection netrjs made the first two fixed properties of a particular terminal id and deter mined the last by the choice of icp socket these differences imply remote operator commands in netrjt in addition to those of netrjs the operator must be able to cause netrjt to open a secondary connection to a tip socket and specify the data transfer protocol maximum logical record length and or transmission code these netrjt commands are discussed in the following section ccn plans to proceed with implementation of a netrjt server with the goal of completing an initial version by march this initial version may support only dtp bs or tt and recfm telnet or records other options will be added as the need arises we welcome comments and suggestions page in the longer term we believe that the netrjt protocol described here should be considered as the first draft of a network standard for remote job entry via tip s in its present form netrjt owes much to the ideas and comments of alex mckenzie bbn jon postel nmc jim white ucsb and steve wolfe ccn b netrjt commands netrjt provides the following commands over the remote operator connection in addition to the netrjs operator commands see appendix d of rfc the symbol denotes one or more spaces we will use the ibm meta language to describe the command syntax the literal text shown here in upper case may in fact be entered in either upper or lower case opening a stream pr inter o pen pu nch jobname socket number host name r eader if the specified device does not already have an open connection the netrjt server will request connection to the specified socket the optional jobname para meter is used to specify a particular job by name for more information on the semantics of this parameter see the discussion of input and output operations below the host name parameter to be implemented later is intended to allow the file to be at a host different from both user and server hosts we include it here only to suggest a syntax the socket number may have a one letter suffix d h or o to mean decimal hex or octal octal is the default so the o suffix may be omitted if bbn establishes standardized tip sockets for specific unit record devices the socket number parameter could be omitted when the standard socket number is intended page closing a stream pr inter cl ose pu nch a ccept r eader this command closes the specified data transfer connection the accept option is used to signal the server that it may discard output it has transmitted or that it has received a complete stack of job input see discussion in next section the device specification pr pu or r may be omitted if only one device stream is currently open setting format and device characteristics in each of the following variants of the rjt commands the parameter device is one of pr inter pu nch or r eader rjt d tp device b s t t d tp bs an unstructured byte stream tt the tip tape transfer protocol essentially the count form of network dtp dtp the network standard dtp complete with a modes available handshake this form is not useful for tip s but is included here in anticipation of the general network standard rje protocol rjt r ecfm device t elnet a sa r ecords c ompressed page the following choice of options is tentative as it is presently unclear just what record formats will be useful for tip tapes or remote batch terminals connected to tip s telnet the telnet like format cr lf used to delimit logical records in all streams and format effector control characters cr lf ff for printer carriage control asa crlf used to delimit logical records but an asa carriage control character is sent as the first character of each printer record this option may be useful for remote batch terminals which expect asa carriage control records the truncated format of netrjs an id byte a count byte and then the string with asa carriage control in each printer record compressed the compressed format of netrjs see rfc for details compression will be useful for batch terminals connected remotely to tip s rjt size device integer this command sets the maximum logical record length for the specified device netrjt will automatically fold any records exceeding this size default sizes are pr pu r rjt code device a scii e bcdic this command sets the code to be used page c using netrjt at ccn getting started a perform icp to server telnet socket b execute command rjt yielding ready message from netrjt c issue rjs signon command d these steps result in a standard full duplex telnet connection for an rjs remote operator console the user can issue commands to learn the status of his jobs send messages reroute and abort jobs etc retrieving output a the tip user captures a local output device and then executes the netrjt open command for the printer or punch for example if the connection is not yet open then either of o pr socket o pr socket opens a printer connection and selects the first job in the printer queue for this terminal id o pr jobname socket similarly opens a connection but selects a specified job s output in either case if output is not yet available the connection remains open but idle and the output is sent when it does appear if the socket number is omitted and the connection is not yet open the server will prompt for a socket number b if the specified output device already has an open connection either of the open commands o pr o pr jobname page may be issued to accept see e below the last job s output and select and send another job s output if the connection is already open the open command may still specify socket but if the specified socket does not match that currently open there will be an error message c while the output stream is idle the user can issue rjt commands with dtp recfm code and or size parameters d when the specified output is available the server will send a stream of print line or punched card images the user may issue the following rjs stream control commands see nic and for more information on rjs commands backspace repeats roughly the last page of printed output restart restarts output at the beginning of the current sysout data set or job option at the beginning of the job cancel deletes rest of current sysout data set or job option the entire job except account ing information defer stops transmission of the current job and returns it to the queue marked deferred can be restarted later with a backspace reset jobname command or from the beginning restart jobname command e the server does not discard job output until it is fully transmitted to the tip and the user has accepted it if the user issues a close device or the connection breaks accidentially e g due to software or hardware failure in either host before the output is accepted the server saves the output with an implied backspace when the user later reopens the connection and again selects this job either explicitly by name or by calling for the next job it will be retransmitted repeating the last page the user can also defer or restart the job output before reopening the connection note that close without the accept option is generally a panic control to stop the output stream if the printer paper jams etc f transmitted output will be considered accepted by the user if the user issues a new open command for that device page the user issues a close device accept e g cl pr a command for that device this command will be held pending until job output in progress has completed after the last rfnm is received the connection will be closed and the job output discarded at the server end the original open command specified i e an asterisk for jobname this implies that the device stream is going to be running continuously and that the user does not want to explicitly request each output job or to accept each one thus if the stream is opened then the server assumes each job is accepted when the rfnm returns from the last block sending input a the user sends the following remote operator command to the server open reader socket this may be shortened to o r socket the server will send an rfc to the user s card reader socket on which his tip should be listening the server will issue an operator message when the connection is open the connection will be considered idle until the first card image is received by the server the open command will be ignored if the connection is already open or if an earlier open request is pending b before or after the open but while the connection is idle the user may issue rjt commands to set the record format data trans fer protocol code and or maximum record size to different values c the user sends in a stream of card images which constitute one or more jobs the server will discard the spooled images for a job without processing them if the user issues a cancel reader command or if the connection breaks e g due to software or hardware failures in either host before the job is accepted for processing the stream then becomes idle again page d a spooled job will be accepted by the server only when one of the following occurs a server dependent end of job card e g null at ccn is received by the server the last job is accepted and the stream becomes idle until another card is received a server dependent beginning of job card e g a job card at ccn is received by the server the previous job is accepted but the stream does not become idle at this time the user issues a close reader accept or cl r a com mand to the server the stream is closed e the user can issue a close reader cl r command to close the stream however this command will be held pending by the server until the stream is idle unless the form close reader accept is issued a close will cancel a pending open command and vice versa the server will send the remote operator a message when a connection opens or closes f some servers e g ccn will extract the jobname for each input job from the reader stream however the open command may specify a particular jobname overriding that in the reader stream that is the jobname from the open command will replace that appearing in the first job of the newly opened stream this feature is merely a convenience and was included mainly for syntactic consistency between input and output however the use of asterisk as a jobname has no meaning for the reader stream and will be ignored page 