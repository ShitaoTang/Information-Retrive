 network working group j white request for comments sri arc nic june a proposed mail protocol author s intent this is the document i offered in to write it s a proposed specification for handling mail in the network a mail protocol main handling is currently implemented as two ftp commands mail and mlfl which permit an ftp user process to deliver a file or string of text to an ftp server process designating it as mail to be made available to a user identified by a local name in its host the protocol proposed here is much richer than that both in terms of the functions it supports and in terms of the flexibility it provides although one can i think and might implement software on the basis of this document this really is a request for comments comments questions position papers are solicited there are i m sure bugs in the protocol specified here and i hope that readers will point them out via rfc as they discover them various members of the network community have during the last few months pointed out to me specific inadequacies in the existing mail commands and asked me to be conscious of them in designing a new protocol i ve tried to do that if anyone feels that his concern wasn t properly dealt with here or that it slipped through the cracks entirely for which i apologize in advance i would appreciate it if he would prod me once more introduction the mail protocol environment the mail protocol mp is implemented by mail user and server processes in keeping with the model for previous high level protocols the mail user and server processes are further specified to be also ftp user and server processes respectively that is mp is implemented as a set of commands accessible from within the ftp command space the mp command set is defined to lie conceptually within a subsystem invoked from the ftp command space with the command mail white page rfc a proposed mail protocol june note since a command called mail already exists within the ftp command space the command name xmail might substitute for mail while the current mail commands are being phased out the mp command set may or may not according to the implementation of a particular server be implemented by a process distinct from that which implements ftp proper the following are implications of the subsystem concept of which the reader and implementer must be aware names of mp commands are known only within the mp subsystem mp commands must and should naturally be rejected by the server if the user process presents them outside of the subsystem exit from the mail subsystem to the ftp command space is effected with and only with the command exit ftp commands must be rejected by the server if the user presents them while inside the subsystem i e before exit is issued the same command name may be assigned without ambiguity to two entirely different commands provided that one lies within the ftp command space and the other within mp the two being distinguishable by their contexts mp and ftp therefore do not compete for command names and mp command names may be chosen without regard for the environment in which the subsystem resides note it so happens that there are commands defined within mp which duplicate the functions of ftp commands and bear the same names the effective result is that some commands are explicitly allowed within mp the reader will understand that this fact is consistent with the conventions described in above and that no ambiguities result the subsystem concept if not the name subsystem is taken from mike padlipsky s unified user level protocol uulp which the author of the present document strongly supports the fact that mp is accessed from ftp rather than both ftp and mp being accessed independently from a more general executive program is simply a concession to the fact that ftp is widely implemented and uulp isn t the author hopes that protocol development will in the near future begin to proceed along the lines exemplified by uulp white page rfc a proposed mail protocol june mp conforms to ftp in general syntax in particular commands and their responses are strings of nvt characters command names are limited to four or fewer upper or lower case alphameric characters and are terminated by the character sp commands are generally terminated with the telnet new line sequence cr lf command responses contain both numeric process readable and text human readable portions both reader and implementer are referred to the ftp protocol document for a detailed description of such matters no attempt has been made to duplicate the discussion in the present document the ftp protocol document assigns those replies whose second digit is to rje functions in like manner mp appropriates those reply codes whose second digit is for reporting results peculiar to its functions it is however the author s position that ftp mp and the rje protocol are all best implemented as subsystems under a common uulp executive in which case a single subset of the reply space could be used unambiguously by all three protocols and any yet to be defined since every reply would implicitly be qualified by the name of the subsystem from which it emanates the mail model mp defines mail to be text communicated between users both human and processes in less that but ideally approaching real time the definition excludes so called console to console communication where users exchange information at the character or line level pieces of mail are characterized by such attributes as title content author and recipient a piece of mail may be a one or two line message sent from one individual to another a draft of a document sent by one individual to a design group for review a polished formal document sent from one group to another a message sent to a human user by a process e g an rje server process might notify a user by network mail when his job has completed etc all such forms of communication are mail and are supported by mp pieces of mail can be forwarded from one location to another pieces of mail can be replied to the identity of the author of a piece of mail can be verified avoiding forgery and misrepresentation white page rfc a proposed mail protocol june pieces of mail can be permanently recorded assigned a long term identifier by which they can be forever be retrieved for reference and entered in catalogs and access to such recorded mail can be restricted to a specified subset of the user community some hosts accept mail whose recipients reside elsewhere in the network and assume responsibility for delivering the mail to them worrying about retrying delivery when hosts are down etc and acknowledging its delivery to the sender the picture being painted for the reader is one in which processes cooperate in various ways to flexibly move and manage network mail the author claims without proof of course that the picture will in the future get yet more complicated but that the proposal specified here can be conveniently enlarged to handle that picture too organization of this document the rest of this document consists of the following components glossary the concepts introduced briefly in the section above are more formally defined and their manner of representation in the protocol specified mp functions the command sequence is defined by which a user process initiates each of the logical functions e g distribution recording delivery which can be performed by a mail server process example an example of the command response exchange between a user and server is given command summary a summary of mp commands is given command replies reply code assignments are given and briefly explained white page rfc a proposed mail protocol june formal syntax the formal syntax of the command language is specified in all sections but the last i e the formal syntax presentation verbose keyword forms are employed in the interests of clarity these verbose forms have no existence anywhere but in this document in implementing a mail user or server process the terse keyword forms which appear in the formal syntax presentation are to be employed glossary terms are listed here in alphabetical order words or phrases which appear in the definitions with initial letters capitalized are themselves formally defined elsewhere in the glossary access list for a piece of recorded mail that set of individuals with access to a piece of recorded mail and for each such individual the type s of access granted to him an access list is represented in the protocol as a series of command pairs juxtaposed in the command stream each pair consisting of an access command followed immediately and optionally by an accesstypes command each pair of commands corresponds to one individual in the set access accesstype command arguments identify the individual to whom access is granted and specify the kind s of access allowed him either read access controlling access or both may be granted if no individual is specified all is implied in the absence of an explicit accesstypes command one with only read access specified is to be assumed in the absence of an explicit access list one granting read access to all and controlling access to the author s and the clerk is to be assumed white page rfc a proposed mail protocol june acknowledgment for a piece of mail a form of unrecorded mail generated by a distribution agent whose recipient is the monitor for a previous piece of mail which acknowledges delivery successful or otherwise to the recipient s of that first piece of mail an acknowledgment bears the serial number of the mail it acknowledges as the reference serial number acknowledgment condition for acknowledgments the attribute of an acknowledgment which determines the circumstances under which it will be generated by the distribution agent the following acknowledgment conditions are defined always acknowledgment is given when all deliveries are complete regardless of whether or not they are all completed successfully failure acknowledgment is given when all deliveries are complete if and only if delivery to one or more recipient s fails never an acknowledgment is never made an acknowledgment condition is represented in the protocol by the command ackcondition in the absence of an explicit ackcondition command one with an argument of failure is to be assumed acknowledgment type for acknowledgments and progress reports the attribute of an acknowledgment or progress report which determines the nature of its content white page rfc a proposed mail protocol june the following acknowledgment types are defined terse the content of a terse acknowledgment or progress report is specified by the protocol to be an unembellished list of the mail s recipient s and the current delivery status for each except that those recipient s whose delivery status is successful shall not be included in the list the content of a terse acknowledgment is one or more instances of the following terse acknowledgments and progress reports are intended to be process readable verbose the content of a verbose acknowledgment or progress report is not specified by the protocol but might include a list of those recipient s to whom the mail could not be delivered and why the times at which delivery was made to others etc verbose acknowledgments and progress reports are intended to be human readable an acknowledgment type is represented in the protocol by the command acktype in the absence of an explicit acktype command one with an argument of terse is to be assumed all every conceivable individual author of a piece of mail an individual there may be more than one given formal recognition for having authored a piece of mail white page rfc a proposed mail protocol june author list for a piece of mail that set of individuals who are author s of a piece of mail an author list is represented in the protocol as an individual list of type author catalog of recorded mail a named data base containing the citation for each member of a set of logically related pieces of recorded mail catalog list for a piece of recorded mail that set of catalogs which each contain the citation for a piece of recorded mail a catalog list is represented in the protocol as a series of instances juxtaposed in the command stream of the following command each instance corresponds to one catalog in the set catalog citation for a piece of recorded mail the static and dynamic attributes of a piece of recorded mail citation component any one of the static or dynamic attributes which comprise a citation citation retrieval for a piece of recorded mail the act of retrieving selected citation component s citation template a specified subset of the citation component s for a piece of recorded mail a citation template is represented in the protocol by the command white page rfc a proposed mail protocol june citationtemplate the argument is a list of citation component s in the absence of an explicit citationtemplate command or if the argument is null one specifying content only is to be assumed clerk that individual who prepares a piece of mail for recording distribution or delivery conceptually the individual with proof reading responsibility for the piece of mail a clerk is represented in the protocol as an individual list of type clerk and length comments for a piece of mail an informal perhaps verbose description of the content of a piece of mail or any other information the author s wish to have made accessible to the recipient s of the mail comments are represented in the protocol by the command comments in the absence of an explicit comments command one with a null argument is to be assumed content of a piece of mail it s text content is represented in the protocol by either of the two commands below file the file command implies that the content of the mail will be transmitted immediately as a file using the ftp data transfer commands e g byte sock type currently in effect file is exactly equivalent in use to an ftp stor command in its use of data transfer commands in its establishment of the data connection etc except that no pathname is required and the server rather than depositing the transmitted file in his file system disposes of it in a manner appropriate for mail white page rfc a proposed mail protocol june text the text command implies that the content of the mail follows on the telnet connection as a series of lines each delimited from the preceding one by cr lf and terminated finally by a ca controlling access to a piece of recorded mail the right of an individual to modify a dynamic attribute of a piece of recorded mail recording agents permit an individual to modify a dynamic attribute of a piece of recorded mail if and only if he can properly identify himself as someone having controlling access to that mail creation date of a piece of mail the date and time at which the final draft of a piece of mail is completed by the clerk before he releases it to a delivery distribution or recording agent for further processing a single creation date is associated with each piece of mail in general this date is different from the delivery or recording date since mail often must be queued for another host to come up within the delivery distribution or recording agent s host before delivery of recording can occur a creation date is represented in the protocol by the command creationdate cutoff interval for distribution of a piece of mail that period of time measured from the distribution date after which the distribution agent is to abandon delivery attempts for those recipient s to whom delivery has not yet been effected a cutoff interval is represented in the protocol by the command cutoff in the absence of an explicit cutoff command one specifying an interval of days is to be assumed white page rfc a proposed mail protocol june delivery of a piece of mail the act of transmitting a piece of mail to the host of one of it s recipient s delivery agent a process which effects delivery of a piece of mail a distribution agent is by nature also a delivery agent delivery date of a piece of mail to one of its recipient s the date and time at which a piece of mail is delivered by the delivery agent to a recipient s system a multitude of delivery dates one for each recipient are associated with each piece of mail delivery status for a piece of mail with respect to a recipient a measure of the extent to which a delivery agent has been successful at a given point in time in delivering a piece of mail to one of its recipient s a multitude of delivery status one for each recipient are associated with each piece of mail the following delivery status are defined failed delivery was rejected by the recipient s system e g the connection request was rejected the mail server process doesn t support delivery the recipient was not recognized by the server successful delivery was accomplished successfully timed out either the recipient s host was disconnected from the net at every delivery attempt or no mail server process has ever responded to the connection attempt hope of delivery has been abandoned white page rfc a proposed mail protocol june waiting either the recipient s host has been disconnected from the net at every delivery attempt or no mail server process has yet responded to the connection attempt delivery attempts are continuing periodically unattempted no delivery attempt has yet been made delivery type for a delivery the nature of the piece of mail being delivered the following delivery types are defined forward a delivery of type forward represents a piece of recorded or unrecorded mail which is being forwarded mail a delivery of type mail represents a piece of recorded or unrecorded mail whose ultimate source is an individual this is the normal delivery type negative acknowledgment a delivery of type negative acknowledgment represents a piece of unrecorded mail generated by a distribution agent and acknowledging unsuccessful or partially unsuccessful delivery of a previous piece of mail identified by reference serial number to it s recipient s the recipient for this piece of system mail is the monitor for the previous piece of mail positive acknowledgment a delivery of type positive acknowledgment represents a piece of unrecorded mail generated by a distribution agent and acknowledging successful delivery of a previous piece of mail identified by reference serial number to it s recipient s the recipient for this piece of system mail is the monitor for the previous piece of mail white page rfc a proposed mail protocol june progress report a delivery of type progress report represents a piece of unrecorded mail generated by a distribution agent and reporting the delivery of a previous piece of mail identified by reference serial number to it s recipient s the recipient for this piece of system mail is the monitor for the previous piece of mail reply a delivery of type reply represents a piece of recorded or unrecorded mail generated in reply or pertaining to a previous piece of mail identified by reference serial number delivery type is represented in the protocol by the command deliverytype in the absence of an explicit deliverytype command one with argument of mail is to be assumed distribute date for a piece of mail the date and time at which a piece of mail is presented to a distribution agent for distribution distribution of a piece of mail the act of delivering a piece of mail to its recipient s distribution can be effected by either the clerk s delivery agent or by a distribution agent acting on his behalf distribution agent a mail server process which acts as intermediary in the delivery process by accepting mail for recipient s in hosts other than its own and then assuming responsibility for delivering the mail to them and returning acknowledgment to the appointed monitor distribution list in the delivery or distribution of a piece of mail that set of individuals who are to receive delivery of the mail white page rfc a proposed mail protocol june in the recording of mail that set of individuals who have received formal and authorized delivery of a piece of mail the list is kept current by distribution agents of course any individual with read access to the mail can himself deliver it informally to anyone he chooses without that fact s being reflected in the distribution list a distribution list is represented in the protocol as a series of command quintuplets juxtaposed in the command stream each quintuplet consisting of a recipient command followed immediately and optionally by any or all of the following in the order given a generaldelivery a greeting a signature and a disposition command each quintuplet corresponds to one individual in the set recipient generaldelivery this command is appropriate only in the context of the delivery function if the previous recipient command illicits the reply recipient unrecognized is general delivery ok the issuance of the generaldelivery command constitutes consent to proceed with general delivery to that recipient if no such consent is given the recipient command stands rejected unsolicited i e unprompted for general delivery commands in the distribution list are treated by the server as nops greeting the greeting command specifies the greeting to be seen by the recipient if the first quintuplet in the list contains no greeting command one with a null argument is assumed thereafter in the absence of an explicit greeting command one identical to that for the previous quintuplet is assumed signature the signature command specifies the signature to be seen by the recipient white page rfc a proposed mail protocol june if the first quintuplet in the list contains no signature command one with a null argument is assumed thereafter in the absence of an explicit signature command one identical to that for the previous quintuplet is assumed disposition the disposition command identifies the intent with which the mail is delivered to the recipient by the author s and may take any all or none of the following as arguments rsvp the author s request a reply from the recipient action the author s expect some action on the part of the recipient if action doesn t appear then the mail is intended for the recipient s information only interrupt the author s declare that examination of the mail by the recipient is urgent in such cases the recipient s mail server process may upon delivery choose to interrupt the recipient if he happens to be logged in at a terminal no specific action in response to the presence of any of these arguments is required the server is free if he likes to treat disposition commands as nops the absence of a disposition command implies one with no arguments i e for the recipient s information only no reply required and not urgent dynamic attributes of a piece of recorded mail those attributes of a piece of recorded mail distribution list access list and catalog list which though given initial values at recording time can always be modified by an individual with controlling access to the piece of mail forwarding of mail received for an individual the act of transferring that set of mail which has been previously delivered to but not read by an individual to another individual white page rfc a proposed mail protocol june users who are known at more than one host can cause their unread mailto be gathered in to a central location by performing the forwarding function at each such host both individuals being in this case instances of the same user mail which has been forwarded is considered to have been read at its source forwardee that individual whose delivered but unread mail is to be forwarded a forwardee is represented in the protocol as an individual list of type forwardee and length general delivery of a piece of mail to an unrecognized recipient the act on the part of a server of accepting delivery of a piece of mail on behalf of an intended recipient whose name the server doesn t recognize the server retains the recipient s name and makes it and the other information provided by the user process available to some competent person who attempts to make sense of the recipient s name if the recipient is recognized the mail is hand delivered to the appropriate individual general delivery of a piece of mail to one of its intended recipient s is performed only after the server informs the user process of its intent and receives the user process consent if that consent is not given or if the server doesn t implement general delivery the server rejects the delivery attempt for that recipient consent for general delivery is represented in the protocol by the command generaldelivery greeting for the delivery of a piece of mail to a recipient a short greeting to a recipient of a piece of mail dear dave is a valid and perhaps typical greeting a greeting is represented in the protocol by the command greeting white page rfc a proposed mail protocol june id for an individual the password which an individual may have to present to a mail server process to prove his identity an id is represented in the protocol by the command id ids have nothing to do with accounting and when required by a server they re required only to protect that server from forgery or misrepresentation individual an instance of a user identified by nic ident or by the combination of host and mailbox name individual list of type t and length n a set of individuals an individual list is represented in the protocol as a series of n command pairs juxtaposed in the command stream each pair consisting of a t command followed immediately by an id command each pair corresponds to one individual in the set the id command is given by the mail user process at the option of the mail server process and whenever the server requires it he must prompt for it with an appropriate reply to the preceding t command if no such prompt is given the user process is not obliged to provide the id command but may if it chooses in which case the server is obliged to treat it as if it had been prompted for and found correct the id command is a mechanism by which the server can assure himself that the user process is not acting without proper authorization from the individual s involved i e a mechanism by which a server can protect himself against forgery misrepresentation etc t id white page rfc a proposed mail protocol june mail a body of text communicated from one set of individual s to another in less than but ideally approaching real time mailbox name the name a user employs at a host to send and receive mail monitor for a piece of mail the individual who is the recipient for acknowledgments and progress reports a monitor is represented in the protocol as an individual list of type monitor and length monitor defaults to the clerk if not explicitly specified progress report for a piece of mail a form of unrecorded mail generated periodically during the distribution process by a distribution agent whose recipient is the monitor for a previous piece of mail and whose content is a list of the recipient s and the current delivery status for each a progress report bears the serial number of the mail whose status it reports as the reference serial number protocol the mail protocol mp read a piece of previously delivered mail the act on the part of the user of examining a piece of delivered mail read access to a piece of recorded mail the right of an individual to retrieve the content of a piece of recorded mail recording agents permit an individual to retrieve the content of a piece of recorded mail if and only if he can properly identify himself as someone having read access to that mail an individual can retrieve the citation except content from the recording agent independently of whether or not he has read access to the mail white page rfc a proposed mail protocol june read date of a piece of mail for one of its recipient s the date and time necessarily following delivery at which a piece of mail is read by a recipient a multitude of read dates one for each recipient are associated with each piece of mail recipient of a piece of mail an individual who has or is to receive delivery of a piece of mail recorded mail a piece of mail whose citation is available on a long term indefinite basis from a recording agent recording the service provided by a recording agent recording agent a mail server process which accepts mail permanently records its citation and assigns a pathname by which that information can at any time be retrieved by an individual with appropriate access recording date the date and time at which a piece of mail is presented to a recording agent for recording a single recording date is associated with each piece of recorded mail reference serial number for an acknowledgment progress report or reply the serial number of the piece of mail to which an acknowledgment progress report or reply refers a reference serial number is represented in the protocol by the command referenceserial in the absence of an explicit referenceserial command no serial number is to be assumed white page rfc a proposed mail protocol june reply to a previous piece of mail a piece of recorded or unrecorded mail whose author s are recipient s of a previous piece of mail and which replies or pertains to that same piece of mail and bears its serial number as the reference serial number report interval for a progress report the interval between progress reports a report interval is represented in the protocol by the command reportinterval in the absence of an explicit reportinterval command one with an argument whose value is effectively infinite is to be assumed i e no progress reports are to be made requestor the individual on whose behalf a mail user process connects to and interacts with a mail server process a requestor is represented in the protocol as an individual list of type requestor and length serial number for a piece of mail a short term identifier assigned to a piece of mail by the clerk or his system which accompanies acknowledgments progress reports and replies and is used to correlate the latter with the former the lifetime of a serial number is conceptually from its assignment by the clerk until the delivery of the recipient s reply s to the author s or until their decision to send no reply a serial number is represented in the protocol by the command serial in the absence of an explicit serial command no serial number is to be assumed signature for the delivery of a piece of mail to a recipient a human readable indication of the author s of a piece of mail the string jim and dick is a valid signature white page rfc a proposed mail protocol june a signature is represented in the protocol by the command signature static attributes of a piece of recorded mail those attributes of a piece of recorded mail content title comments author s clerk and creation date which are forever fixed at recording time and hence can never be modified static attributes can be independently specified with commands described elsewhere or specified collectively by reference to an existing piece of recorded mail the command which follows assigns to the current piece of mail the static attributes of the piece of recorded mail it references and is exactly equivalent to an appropriate set of title comments etc commands location title of a piece of mail a concise description of the content of a piece of mail a title is represented in the protocol by the command title in the absence of an explicit title command one with a null argument is to be assumed unrecorded mail mail which is never presented to a recording agent for permanent storage and cataloging but which is simply delivered to its recipient s by a delivery agent update request to a recording agent for a piece of recorded mail a request made of a recording agent to add replace or delete an individual from the access or distribution list for a piece of mail or to add or delete a catalog from the catalog list an update request is represented in the protocol by the command updatetype followed immediately in the command stream by an access distribution or catalog list white page rfc a proposed mail protocol june user a process or human who sends and or receives mail user verification the act of verifying an id as that of a specified individual user verification agent a mail server process which performs user verification mp functions a mp function is the request by a mail user process and the subsequent performance by a server of a major task related to the management of mail the following functions are defined recording delivery distribution forwarding citation retrieval update citation user verification one might expect that within the network there would be just a few recording agents who implement the recording citation retrieval and update citation functions a few distribution agents who implement the distribution function one or two user verification agents who implement the user verification function and many hosts who implement the delivery and forwarding functions in general a host is free to implement any all or none of the functions defined by the protocol and a host is free to require a login for purposes of accounting before permitting a user process access to any of the function s it has implemented an ftp server process who chooses to not implement mp or a particular mp function simply rejects the command that requests the unimplemented server with the reply function not implemented a server who chooses to require login before allowing access to the mp subsystem or to an mp function simply rejects the command that requests the charged for service with the reply white page rfc a proposed mail protocol june login first please the functions defined in mp are recording the recording function is invoked with the command record once this command is given the user process shall provide the following in any order that suits it any static attributes desired content and clerk are required defaults for other static attributes applied by the server if the appropriate commands don t appear are as follows title or comments as specified in the glossary author to the clerk creation date to the recording date initial values for any dynamic attributes desired defaults applied by the server if the appropriate commands don t appear are as follows distribution and catalog lists to null access list as specified in the glossary the recording function is terminated with either of the commands exit or abort exit represents normal termination and causes the server to perform the recording function for which parameters have just been given abort represents abnormal termination and effects exit from the function with no action having been taken by the server the whole command exchange beginning with record is therefore a nop white page rfc a proposed mail protocol june delivery the delivery function is invoked with the command deliver once this command is given the user process shall provide the following in any order that suits it any static attributes desired content is required defaults for other static attributes applied by the server if the appropriate commands don t appear are as follows title or comments as specified in the glossary clerk to null author to the clerk creation date to the delivery date any dynamic attributes desired distribution list is required defaults applied by the server if the appropriate commands don t appear are as follows catalog list to null access list as specified in the glossary both of these attributes are for the recipient s information only when presented in the context of delivery so defaulting them to null simply implies that the clerk doesn t desire that they be communicated to the recipient any or all of the following optional parameters a delivery type white page rfc a proposed mail protocol june b acknowledgment type the specification of this parameter is appropriate if and only if the delivery type is positive or negative acknowledgment or progress report in this context acknowledgment type tells the server how to interpret the content of the acknowledgment c serial number the serial number assigned to the piece of mail being delivered this parameter is inappropriate unless the delivery type is forward in which case the serial number is the one preserved from the previous delivery mail or reply d reference serial number the serial number assigned to the piece of mail to which the current piece of mail is either an acknowledgment progress report or reply the specification of this parameter is therefore inappropriate if the delivery type is mail the delivery function is terminated with either of the commands exit or abort exit represents normal termination and causes the server to perform the delivery function for which parameters have just been given abort represents abnormal termination and effects exit from the function with no action having been taken by the server the whole command exchange beginning with deliver is therefore a nop distribution the distribution function is invoked with the command distribute once this command is given the user process shall provide the following in any order that suits it any static attributes desired white page rfc a proposed mail protocol june content is required defaults for other static attributes applied by the server if the appropriate commands don t appear are as follows title or comments as specified in the glossary clerk to null author to the clerk creation date to the delivery date any dynamic attributes desired distribution list is required defaults applied by the server if the appropriate commands don t appear are as follows catalog list to null access list as specified in the glossary both of these attributes are for the recipient s information only when presented in the context of distribution so defaulting them to null simply implies that the clerk doesn t desire that they be communicated to the recipient s any or all of the following optional parameters a delivery type mail forward or reply only b serial number the serial number of the mail being distributed the distribution agent will relay this serial number to each recipient at delivery c reference serial number the serial number of the piece of mail to which the current piece of mail is a reply the distribution agent will relay this serial number to each recipient at delivery the specification of this parameter is appropriate if and only if the delivery type is reply white page rfc a proposed mail protocol june d acknowledgment condition an acknowledgment is requested from the distribution agent if and only if the acknowledgment condition is other than never e acknowledgment type f cutoff interval g report interval progress reports are requested from the distribution agent if and only if this parameter is specified explicitly h monitor this parameter is ignored unless either an acknowledgment or progress reports or both are requested the distribution function is terminated with either of the commands exit or abort exit represents normal termination and causes the server to perform the distribution function for which parameters have just been given abort represents abnormal termination and effects exit from the function with no action having been taken by the server the whole command exchange beginning with distribute is therefore a nop forwarding the forwarding function is invoked with the command forward once this command is given the user process shall provide the following in any order that suits it forwardee white page rfc a proposed mail protocol june distribution list this is the set of individual s to whom the mail is to be forwarded the forwarding function is terminated with either of the commands exit or abort exit represents normal termination and causes the server to perform the forwarding function for which parameters have just been given abort represents abnormal termination and effects exit from the function with no action having been taken by the server the whole command exchange beginning with forward is therefore a nop citation retrieval the citation retrieval function is invoked with the command retrieve once this command is given the user process shall provide the following in any order that suits it the pathname of the piece of mail whose citation is to be retrieved pathname any or all of the following optional parameters a citation template b requestor this parameter is required if and only if content is requested and read access happens not to be granted to all in which case the server verifies that the requestor has read access to the piece of mail c file this command is appropriate if and only if content is requested the presence of this command implies that the content of the mail is to be returned to the user process following the return on the telnet connection white page rfc a proposed mail protocol june of any other citation component s requested as a file using the ftp data transfer commands e g byte sock type currently in effect file is exactly equivalent in effect to an ftp retr command in its use of data transfer commands in its establishment of the data connection etc except that no pathname is required in the absence of a file command content is returned on the telnet connection like any other citation component the server returns the citation components in the order requested by the user process except that content if requested as a file is always returned after the end of citation indication each as a reply whose numeric code is and whose text is exactly the command normally used to communicate that same parameter to the server a reply whose numeric code is terminates the reply list title and content which in general may each contain the telnet new line sequence cr lf are represented as continued replies using the ftp reply continuation convention see the ftp protocol document the first four characters of each reply line except the first and last are blanks inserted by the server which must be deleted by the user process to correctly recover the value of the title or content the citation retrieval function is terminated with either of the commands exit or abort exit represents normal termination and causes the server to perform the citation retrieval function for which parameters have just been given abort represents abnormal termination and effects exit from the function with no action having been taken by the server the whole command exchange beginning with retrieve is therefore a nop white page rfc a proposed mail protocol june update citation the update citation function is invoked with the command update once this command is given the user process shall provide the following in any order that suits it requestor this parameter is required unless controlling access has been granted to all in which case it is treated as a nop if given the server verifies that the requestor has controlling access to the piece of mail one or more update requests the update citation function is terminated with either of the commands exit or abort exit represents normal termination and causes the server to perform the update citation function for which parameters have just been given abort represents abnormal termination and effects exit from the function with no action having been taken by the server the whole command exchange beginning with update is therefore a nop user verification the user verification function is invoked with the command verify once this command is given the user process shall specify any number of requestors the server prompts for the id for each the user process provides it and the server returns a reply whose numeric code is is the id is correct or otherwise the user verification function is terminated with either of the commands exit or abort white page rfc a proposed mail protocol june example in the example below a short message is recorded for public access and distributed to a single recipient the user process is assumed already connected to the server note this would be the implementation of nic journal submission where the nic is understood to be both a recording and distribution agent replies from the server are in brackets mail the mail system is invoked re de di fw ci up uv supported rec the recording function is invoked ok titl smfs runs on tenex at the nic a title is given ok text the nic came up on tenex on apr i tried smfs here on the new monitor and it works fine i don t understand why i had problems running your copy of the code at bbn tenex are you still unable to reference the same archived file from two different tenexs the content of the message is entered ok cler white sri arc the clerk is identified as white at sri arc ok now id please id id his id is supplied ok white page rfc a proposed mail protocol june exit exit from the recording function is effected and the pathname is returned by the recording agent for the now recorded mail is assigned as the pathname dist the distribution function is invoked ok loc sri arc the message just recorded is specified for distribution ok reci dhc the recipient is specified via nic ident to be dave crocker at ucla nmc ok gree dave a greeting is given ok disp r a reply is requested ok sign jim the message is signed ok ackc a acknowledgment of the mail s delivery is requested whether delivery succeeds or fails ok ackt t the acknowledgment is to be terse ok white page rfc a proposed mail protocol june cut d if delivery hasn t been effected within hours the attempt is to be abandoned and an acknowledgment of failure returned the monitor to whom the acknowledgment is sent is allowed to default to the clerk ok seri serial a serial number is assigned for purposes of coordinating acknowledgment and reply a desirable implementation of the sender s user and server processes is one in which the serial number is assigned by the user process rather than by the human user himself in such a way that his server process can automatically make the association between original mail and subsequent acknowledgment and reply ok exit exit from the distribution function is effected ok exit exit from the mail subsystem is effected ok white page rfc a proposed mail protocol june command summary every command requires at least one reply from the server those specific to mp abort access accesstypes ackcondition acktype author catalog citationtemplate clerk comments creationdate cutoff deliver deliverytype disposition distribute exit file forward forwardee generaldelivery greeting id location mail monitor pathname recipient record referenceserial reportinterval requestor retrieve serial signature text title update updatetype verify white page rfc a proposed mail protocol june those borrowed from ftp the following commands borrowed from ftp are defined also as mp commands to support the transfer of the content of a piece of mail in file form the reader is referred to the ftp protocol document for a description of their use and syntax the borrowed commands are byte sock pasv type stru mode rest and site the following commands borrowed from ftp are defined also as mp commands to permit changes of accounting parameters within the mp subsystem the accounting parameters in force when the subsystem is entered apply if necessary within the subsystem until changed values to which the parameters may have been changed while in the subsystem continue in effect upon return to the ftp command space the borrowed commands are user pass and acct the following miscellaneous commands borrowed from ftp are defined also as mp commands help and noop command replies this list is undoubtedly incomplete some crucial reply code assignments may be missing despite the author s attempt to foresee the kinds of interaction that might arise between user and server and the responses from the server that they would require in response to the exit command which terminates the citation retrieval function end of citation following a list of replies ok this is the standard positive acknowledgment used throughout the protocol white page rfc a proposed mail protocol june is assigned as the pathname in response to the exit command which terminates the record function supported in response to the mail command by which the user process gains entry to the mail subsystem this response is mandatory and from it the user process can quickly determine what function s are supported by the server requestor is who he says he is in response to an id command in the user verification function this reply informs the user process that the id given is in fact that of the individual specified ok now id please in response to the first command in each pair of commands in an individual list this reply requires the next command from the user process to be id login first please in response to any command which invokes a mail function e g record distribute deliver or to the mail command itself this reply implies that the requested function is supported by the server but that the user is required to login before invoking it function not implemented in response to any command which invokes a mail function e g record distribute deliver or to the mail command itself this reply implies that the requested function is not supported by the server incorrect id in response to the id command in an individual list command pair this reply implies that the id specified was incorrect white page rfc a proposed mail protocol june in response to the location command this reply implies that the server attempted to retrieve the specified piece of mail from an ftp server but failed because it returned the error reply whose text is duplicated in the current reply no such pathname in response to the pathname command in the citation retrieval function this reply implies that the specified pathname is not recognized by the server no unread mail to forward in response to the exit command which terminates the forwarding function requestor is not who he says he is in response to an id command in the user verification function this reply informs the user process that the id given is not that of the individual specified you don t have read access to the mail in response to the location command or to the pathname command in a citation retrieval function this reply implies that the requestor doesn t have read access to the piece of mail recipient unrecognized is general delivery ok in response to an instance of the recipient command in a distribution list in the context of the delivery function this response implies that the recipient in unrecognized but that the server will attempt general delivery to him if the user process responds with a generaldelivery command otherwise the recipient is rejected that individual is not at this host no such nic ident or mailbox name in response to any command in which a nic ident or mailbox name appears as an argument this reply implies that the individual specified does not exist white page rfc a proposed mail protocol june invalid host in response to any command in which a host address or standard host name appears as an argument this reply implies that no such host exists no such catalog in response to the catalog command this reply implies that no such catalog exists any reply any of the error replies associated with ftp retr stor commands formal syntax the terse keyword forms to be employed in actually implementing a mail user or server process are generated by deleting character s from the corresponding verbose forms those deleted characters are included but enclosed in brackets throughout the description which follows spaces can be used freely between terminal elements of the syntax and in some cases at least one space must separate two elements whose boundary could not otherwise be distinguished telnet go ahead character telnet new line cr lf cr lf a lways f ailure n ever t erse v erbose a ction null d istribution l ist a cess l ist c atalog l ist c on t ent t itle c om m ents au thor cl erk c reation d ate c ontrolling null decimal integer decimal integer d ays f ailed s uccessful t imed out white page rfc a proposed mail protocol june w aiting u nattempted f orward m ail n egative acknowledgment p ositive acknowledgment p rogress r eport r eply re cording de livery di stribution f or w arding ci tation reteieval up date u ser v erification decimal integer standard host name decimal integer h ours i nterrupt null note host defaults to that of the server com ments text decimal integer decimal integer r ead null r svp null abor t acc ess ackc ondition ackt ype ac cess ty pes auth or cat alog cler k cr eation da te cut off c itation tem plate deli ver de livery ty pe white page rfc a proposed mail protocol june disp osition dist ribute exit file for warde e for ward gen eral d elivery gree ting id loc ation mail mon itor path name reci pient rec ord req uesto r r eference ser ial r eport int erval seri al sign ature titl e upda te up date ty pe ver ify any non zero number of visible characters in particular ca and ca are excluded est edt cst cdt mst mdt pst pdt gmt a dd r eplace d elete full year in decimal e g this rfc was put into machine readable form for entry into the online rfc archives by root white page 