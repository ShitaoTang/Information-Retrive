 network working group j postel request for comments ucla nmc obsoletes may nic a preferred official initial connection protocol this document specifies the their level protocol used to connect a user process at one site with a server process at another site in one instance the user process will be a telnet and the server process will be a logger but there will be other cases this document describes a family of initial connection protocols icp s suitable for establishing one pair of connections between any user process and any server process and further to describe the parameter values for connecting telnets and loggers the description will be at two levels the third or user level and the second or ncp level third level description notation there is no standard notation for describing system calls which initiate and close connections or cause data to be sent so the following ad hoc notation will be used init local l foreign f size s causes the local host to attempt to establish a connection between socket l at the local host and socket f with a byte size of s for the connection l is a bit local socket number f is a bit foreign socket number the high order eight bits of which specify the foreign host and s is an eight bit non zero byte size the sum of l and f must be odd listen local l size s causes the local host to wait for a request for connection to local socket l with byte size s the process will be woken when a connection is established the parameters l and s are the same as for init postel page rfc initial connection protocol may send socket l data d the data named by d is sent over the connection attached to local socket l l must be a send socket attached to a connection d is the name of a data area receive socket l data d the receive side counterpart to send close socket l any connection currently attached to local socket l is closed a family of icp s briefly a server process at a site attaches a well advertised send socket l and listens a user process initiates connection to l from its receive socket u the byte size for this connection is the server process then transmits a bit even number s and closes the connection the bit number s and its successor s are the socket numbers the server will use the final steps are for sockets s and s at the server site to be connected to sockets u and u respectively at the user site using the notation the server executes the following sequence listen socket l size wait until a user connects send socket l data s close socket l init local s foreign u size bu init local s foreign u size bs the user executes the following init local u foreign l size receive socket u data s optional close socket u listen or init local u foreign s size bu listen or init local u foreign s size bs note that l is a send socket odd while s and u are receive sockets even where l s or u are used as values of local they are bit numbers where they are values of foreign they are bit numbers the parameters bs and bu are the byte sizes to be sent by postel page rfc initial connection protocol may the server and user respectively if the user side declines to close socket u then it must be handled automatically by the second level see page examination of the above sequences reveals that an icp is characterized by three numbers l bs and bu and must meet the restrictions that a l is a send socket b bs and bu are legal byte sizes and c for each l there is only one pair of associated byte sizes this last restriction prevents two district services from being available through the same socket and distinguished only by the byte sizes second level description notation the following notation will be used for the ncp control command used in icp str ls fs s ls local send socket fs foreign receive socket s byte size rts ls fs l ls local receive socket fs foreign send socket l link all l m b l link m message allocation b bit allocation cls ls fs ls local socket fs foreign socket postel page rfc initial connection protocol may the same family of icp s is now described again server user s listening on socket l u rts u l l s wait for match u wait for match s str l u s s wait for allocation u all l m b s send data s in s bit u receive data s in s bit bytes bytes as allowed by s bit bytes allocation m b s cls l u u cls u l s rts s u l u str u s s s str s u s u rts u s l the labels here imply no ordering except that ordering required by the host host protocol note that steps s and s can be reversed as can u and u also notice that at any time after s the server could initiate steps s and s in parallel with steps s through s and that at any time after u the user could initiate steps u and u in parallel with step u following the above exchanges all commands would be exchanged and data transfers could begin at this level the parameters of the above icp family are l m b s s s l l l l is a well known socket number and will be specified for each type of service m and b are allocation quantities for the transfer of a socket number m is specified to be b is specified to be s s and s are byte sizes only s is to be specified as s and s are to be left to the process involved s is specified to be l l and l are links and are not specified postel page rfc initial connection protocol may note some hosts currently have difficulty sending bit bytes thus it is temporarily allowed to send the socket number s as four bit bytes in one message it is legal for the ncp to receive rts or str before the corresponding local init or listen is issued therefore it is suggested that requests for connection to idle sockets be queued as allowed by time and space limitations telnet logger icp for connecting telnet and logger processes the icp parameters are l bu s and bs s to clarify the socket number required l x formalities this proposed official protocol will become official if no serious objections are raised before june a telephone survey of network liaisons will be conducted by jon postel before that date if no objections are raised this protocol will be declared official by the working group chairman this document is based on rfc by s crocker and discussions by the icp committee postel page 