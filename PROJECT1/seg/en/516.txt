 nwg rfc abhay k bhushan nic mit mac updates rfc august rfc comments on the file transfer protocol rfc the following comments pertain to the file transfer protocol nwg rfc the comments include errata further discussion emphasis points and additions to the protocol i shall incorporate these comments into the main protocol document after we have had sufficient experience please note the following corrections i page line replace user ftp by server ftp ii page line replace iii a by iii c iii page last para line replace user s by user is iv page line replace crcrlf by crlf v page line replace by vi note that on page line mode code is s b t h the language of rfc reads that it is recommended for hosts to implement the default parameters the sense of the word recommended should be taken as required thus the required minimum implementations for ftp servers is type ascii bit bytes mode stream structure file commands retr stor user and pass sock and bye the print file ascii and ebcidic print file types are incorrectly specified pages and rfc the real problem with print files is of asa fortran vertical format control instead of the two print file types there should really be three types as described below bcdic the sender transfers data using the ebcdic character code and bit transfer byte size the crlf convention is used for vertical format control this type will be used for efficient transfer of ebcdic files between systems which use ebcdic for their internal character representation page nwg rfc page ascii with asa vertical format control this is the print file ascii defined in rfc the server is to transform the data in accordance with asa fortran vertical format control procedures for printing on printers that still use this standard the data is to be transferred as bit bytes ebcdic with asa vertical format control this is the ebcdic print file defined in rfc the server is to transform the data in accordance with asa fortran vertical format control standards but using the ebcdic character code the data is to be transferred in bit bytes the new types are to be denoted by symbols e for ebcdic p for print file ascii and f for formatted asa standard ebcdic print file a discussion of the asa vertical format control appears in nwg rfc appendix c and in communications of the acm vol no p october according to the asa vertical format control standards the first character of a formatted record is not printed but determines vertical spacing as follows character vertical spacing before printing blank one line two lines to first line of next page no advance in addition to the above four there are more characters defined in appendix c rfc which represent an ibm extension to the asa standard a comparison of stream and text modes is in order the advantages of stream mode are the receiver need not scan the incoming bytes it is usable with all data types the disadvantages are the eof by closing the connection is not reliable the eor by ascii crlf is unreliable as the crlf really may be valid data rather than an eor it is an eor only if the sender and receiver have a prior agreement to that effect page nwg rfc page in the block mode the protocol states that left most bits not containing information should be zero it appears that some sites have difficulty sending null bytes in the beginning of a block since it is really not necessary for these bytes to be zero these bits are now defined to be don t care bits in the use of block mode it is possible for two or more conditions requiring different descriptor codes suspected errors and either end of record or end of file to exist simultaneously such a possibility may be handled by sending a separate eor or eof block with a zero byte count this is allowed by the protocol also it should be noted that an eof is an implicit eor it needs to be emphasized again that the user ftp must listen on the data socket prior to sending a command requiring a file transfer specifically the user ftp should not wait for a reply server data socket before doing the listen the security check may be come later as the data connection can be closed if connection is to a socket other than that specified by the reply although the protocol suggests that the reply would be sent before making the connection it does not guarantee that the reply would arrive before the initiating rfc at the user site the above argument also applies to receiving a a close ncp cls on the data connection before receiving a reply indicating the reason for the close note assertion on page paragraph rfc although the protocol does not restrict closing or leaving open the data connection in block and text modes it should be emphasized that the closing of the data connection if it is to be done at all should be done immediately after the file transfer rather than just after a new transfer command is received this is because the server and user may have to test whether the data connection is open or not before doing a listen or an init respectively it should be emphasized again that type supersedes byte and that the type command should be sent before the byte command it should be noted that both upper and lower case alphabetic characters are to be treated identically in the command syntax this applies also to the symbols for type mode and structure for example a and a both indicate ascii type page nwg rfc page it should be noted that in the list command the data transfer is over the data connection in type ascii the following reply code is to be added ftp cannot connect to your data socket this is a fail response any of the commands requiring data transfer including retr stor appe and list rather than use the append command for sending mail files a new command mlfl for mail file is defined the syntax of the mail file command is mlfl crlf where if the user field is empty or blank one or more spaces then the mail is destined for a printer or other designated place for site mail refers to the standard identification described in the nic directory of network participant a serving host may keep a table mapping into this would provide for uniform convenient usage is the user s normal identification at the serving host the use of would allow a network user to send mail to other users who do not have nic identification but whose is known the intent of this command is to enable a user at the user site to mail data in form of a file to another user at the server site it should be noted that the files to be mailed are transmitted via the data connection in ascii type these files should be appended to the destination user s mail by the server in accordance with serving host mail conventions the mail my be marked as sent from the particular using host and the user specified by the user command the reply codes for the mlfl command are identical to that in the appe command as shown below command success fail mlfl sec reply the mlfl command for network mail though a useful and essential addition to the ftp command repertoire does not page nwg rfc page allow tip users to send mail conveniently without using third hosts it would be more convenient for tip users to send mail over the telnet connection instead of the data connection as provided by the mlfl command the following mail command is therefore defined to send mail via the telnet connection mail crlf the syntax of is identical to that in the mlfl command described above after the mail command is received the server is to treat the following lines as text of the mail sent by the user the mail text is to be terminated by a line containing only a single period that is the character sequence crlf in a new line the following new reply codes are defined to handle the mail command enter mail terminate by a line with only a mail completed the reply codes are command success fail mail sec reply an additional access control command called account acct is now defined to facilitate accounting in systems such as tenex which require in addition to user and password a separate account specification the acct command is different from the pass command in that it is not necessarily related to the user command and may arrive at any time for example a user may transfer different files using different accounts the acct command has the same reply codes as the pass command for success and for fail some servers may require that an account command must be sent before the user is logged in for suchcases the success reply to the pass command could be enter account since password information is quite sensitive it is desirable in general to mask it or suppress type out it appears that the server has really no fool proof effective way to achieve this it is therefore the user ftp process responsibility to hide the sensitive password information page nwg rfc page the ftp is an open ended protocol designed for easy expandability experimental commands may be defined by sites wishing to implement such commands these experimental commands should begin with the alphabetic character x standard reply codes may be used with these commands if new reply codes need to assigned these should be chosen between and if the experimental command is useful and of general interest it shall be included in the ftp command repertoire this rfc was put into machine readable form for entry into the online rfc archives by bbn corp under the direction of alex mckenzie page 