 network working group karl c kelley request for comments jaacov meir nic categories d f obsoletes references rfc some experiences in implementing network graphics protocol level we are in the process of implementing ngp at several hosts for the time being we are forced to consider the remote host as the last intelligent machine we are attempting to translate ngp to a machine dependent code for the computek display the remote hosts are ccn ucsd and soon randcsg more comments about that work will be made in subsequent rfc s the concern of this rfc is twofold clarify the coordinate number system puzzle over how to do textr string without either a reading current position and saving it while the text string is being output or b monitoring the beam position for each ngp command and saving this information somewhere an appendix to this rfc will outline the conversion from the ngp coordinate system to the floating point arithmetic on the pdp o the coordinate data the document for ngp rfc does not say specifically that the format of coordinate data is the same whether the command is in absolute or relative mode the only thing stated is that they are in two s complement notation with the leftmost bit being the sign bit it is possible to use two different s complement schemes kelley meir page rfc experience implementing net graphics protocol august system a system b absolute coordinates relative coordinates e e e e e e e e where e where e range to range to i submit that one could interpret the requirement for absolute coordinate data to be in the range to e as requiring that two different number systems should be used thinking along those lines system a has the advantage that you never get handed a number out of range which saves some checking worries it also has one whole bit more of precision i further submit that having two systems to contend with merely clouds the issue and requires extra coding it makes more sense just to stick with system b above among the advantages in its use are the single system can handle both absolute and relative coordinates kelley meir page rfc experience implementing net graphics protocol august if an absolute coordinate exceeds range simply forcing the sign bit on causes a nice wrap around the representation is the same as the mantissa for floating point numbers on most machines notice however that mantissas of normalized floating point numbers are not in the range for absolute coordinates the program will have to shift the mantissa until exponent is it may be that few of us interpreted the ngp document to mean two number systems were needed if that is the case so much the better in any case until shaken from the position by the overwhelming force of contrary logic we will in all of our implementations use system b above for both absolute and relative coordinates the textr command the last paragraph on page of rfc says a command be included only if its output is a function solely of the current command and the beam position current at the start of the command in other words the interpreter for level need have no internal storage for modes or pushdown stacks in the case of the computek display most of the ngp commands correspond to capabilities of the device the lone exception is the textr command there are two ways to know what beam position to return to after the string is displayed one way is to read the cursor position from the display just before doing the string output this is no good because it requires reading from the device which we can t do until input protocols are implemented also on this device the cursor position is accurate only to within scope points the second way to know what beam position to return to is to monitor all motions of the beam in software thus our implementations of ngp to computek translations will employ a software x register and y register on absolute commands the registers will be set to the coordinates for that command on relative commands the coordinate data will be added to the registers at the beginning and end of picture these registers will be set to the textr command will also cause these software beam registers to be changed that is the x register will be incremented for each character of the string to correspond to what is happening in the display itself kelley meir page rfc experience implementing net graphics protocol august appendix ngp to pdp floating point the ngp looks at all data numbers x and y parameters as a fraction number in the following format bits per number bit position with the binary point assumed between bits and bit is the sign bit and all negative numbers are represented as their two s complement the pdp machine code representation of fractions in floating point mantissa part is very similar to the above with one exception the number so the transformation could be obtained simply by two operations move and substitute data x y conversion ngp extreme points floating point pdp bits bits exp mantissa special case e kelley meir page rfc experience implementing net graphics protocol august translation from ngp into floating point for pdp o move sign bit leftmost one to sign bit move fraction part bits to mantissa part left justified fill with zero s to right fill in exponent part bits according to a if positive number exp hex b if negative number exp f hex c exception in only one number in ngp negative sign and fraction all zero s mantissa becomes same as exponent becomes the one s complement of hex d hex the methods of conversion will remain the same regardless of the number of bits up to that are used for the ngp fraction this rfc was put into machine readable form for entry into the online rfc archives by alex mckenzie with support from gte formerly bbn corp kelley meir page 