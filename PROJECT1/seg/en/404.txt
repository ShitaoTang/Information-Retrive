 network working group l pfeifer request for comments j mcafee nic computer systems laboratory ucsb may real time data transmission on the arpanet i introduction the arpa network is rapidly proving to be a useful tool in computer communications and resource sharing it has been proposed that the same network might also be able to support real time processes such as audio or video communications for conferencing purposes the degree of support of these types of processes will largely be determined by transmission bit rates and delays the imp subnetwork throughput rates one way average about kilobits therefore an external process must operate at a bit rate below that level this would imply some form of data compression for both audio and video transmission research in these areas is still in progress so these processes must be simulated at the present time in addition to bit rate system response time system delay is an important factor since this has direct influence on the amount of data which must be buffered in order to keep a real time process running without discontinuities or gaps such delays may be caused by network loading host loading or an excessive number of imp to imp hops in the transmission path in order to get a feel for the ability of the network to support a real time process an experiment was conducted with real time data being sent from the ucsb sel b computer by way of the ucsb ibm host onto the arpa network and into a host discard socket in the ucla ibm computer this particular data path very nearly duplicates the path which might be taken if real time devices were attached to large scale host computers operating in their normal mode usually timesharing the experiment consisted of measuring the duration of gaps incurred at various process bit rates and buffer sizes ranging from one to eight network packets earlier experiments at mit simulated vocoded speech transmission over the arpa network using the tx computer and fake host in a destination imp speech was sampled by the tx and simulated speech data blocks were sent to a particular fake host receipt of an acknowledgment by tx indicated that the corresponding blocks of speech data could be reconstituted experiments were conducted with bit rates from bps and varying block sizes depending on pfeifer macafee page rfc real time data transmission on the arpanet may the number of hops and conclusions were reached that with delay characteristics similar to a lightly loaded arpa network speech communications could be satisfactory from a human factors standpoint ii configuration data for this experiment originated in an sel b computer located in the electrical engineering department at ucsb this ns cycle time computer is the heart of an interactive signal processing system developed by retz it has associated hardware such as a card reader two ibm disk drives a drum storage unit a d and d a converters teletype tektronix storage display unit ols keyboard and a connection to an ibm computer this system is linked to the ucsb ibm via a kilobit line for high speed data transfers software in both the sel b and the ibm enables the sel to communicate with the arpa network the hardware configuration of the data path between the sel b and ucla is shown in figure for simulating speech transmission the sel is thought of as a speech processor analyzing and encoding the one way conversation of a person at ucsb talking to someone at ucla the fact that there was no speech processor at ucla probably had little or no effect on the measurements that were made this is substantiated by noting that the sel was a dedicated processor that did not introduce delays and if a similar dedicated processor was attached to the host computer at ucla it probably would not have caused delays either however the ucla host merely discarded the data it received thereby going through fewer steps than if an external processor was attached and so our simulation was not exact a configuration such as that of figure did yield information about host to host transmission since the sel was essentially a zero delay data generator if real time processors are to access the arpa network through large scale time shared host computers then host to host transmission rate and delay are important measurements in this configuration we can expect the host computers to be the primary bottlenecks in the data path pfeifer macafee page rfc real time data transmission on the arpanet may ucsb ucla kb s sel b ibm ibm inter inter face face discard ncp kb s v v v d a imp imp kb s speaker figure hardware configuration of data path used for sending real time data from the sel b to the ucla host discard socket the host response time to requests from the external processor or the network will be a function of type of host computer ibm dec univac etc job load and priorities given to both the network and the external processor if host computers cannot provide the necessary throughput and necessary response times then real time devices may have to connect directly to imps assuming the network can properly support these devices iii software the standard ncp software was used in both host computers several custom programs were required in the ucsb computers in order to transfer the data and make measurements these can be divided into three categories i o programs routines were written for both the ibm and the sel to handle the transfer of data between the two computers and to enable the sel to send an attention interrupt to the ibm these programs form the software part of the sel high speed data link and are necessary for any communication between the two computers pfeifer macafee page rfc real time data transmission on the arpanet may network communications programs a protocol was developed which enabled the sel to communicate to the the desired network connections to be made or broken and the desired transfer of data across these connections this protocol was implemented for each computer using the above i o routines measurement control program this assembly language program caused the sel to push data towards the receiving host ucla at a specified sel process bit rate the program was also responsible for detecting and measuring the duration of any gaps introduced in the process iv method within the sel two buffers each of to network packets in length are first loaded with alternating bit patterns in consecutive bit words a conversion process is then initiated on one of the buffers at a sampling frequency necessary to give the desired bit rate since data is being sent out to a destination host we would expect the buffers to be filled by an analog to digital conversion process however in this experiment the process of digital to analog conversion is used instead so that we can listen to the alternating bit patterns as a steady tone while still simulating an a to d process when a buffer is filled played out a write operation is initiated to send that buffer to ucla the next buffer is then tested to see if the previous write has been completed i e the buffer is empty if the next buffer is empty the process continues normally if the next buffer is not empty it means that one of the computers on the network has not taken the data fast enough therefore a gap has been introduced in the real time process at this point the d to a converter is shut off resulting in an audible break in the tone that is being played out a timer is also started to test for the empty buffer every one millisecond and to measure the duration of the gap when the next buffer is finally emptied the d to a process is resumed and the gap data recorded in a table v procedure a connection to the ucla host discard socket was first established using the network communications programs every test from this point on required a repetition of the following steps pfeifer macafee page rfc real time data transmission on the arpanet may initialize the ucsb ibm for double buffered data transfers using specified buffer sizes initialize the sel measurement control program with the proper buffer size and process bit rate start the test a constant tone from the speaker indicates that the process is being properly maintained gaps in the tone indicate gaps in the process after seconds stop the test examine the gap table to determine the number of gaps the duration of each gap and the average duration the entire procedure was carried out from the sel end using the interactive on line system the timing interval of seconds was measured with a sweep second hand of a watch and the test was started and stopped manually all tests were conducted during prime time to obtain typical loading conditions vi results a total of tests were conducted of these were second tests and three were long duration tests table i contains the results of the second tests buffer sizes were varied from one to eight network packets and for each buffer setting different process bit rates usually in increments of bps were attempted these measurements were performed over a period of three days during prime time those test conditions which were successful contain only two items of information in table i time of day and number of buffers transmitted all but seven of the tests were successful the tests which were unsuccessful i e experienced gaps are those entries in table i which contain additional information such as number of gaps and maximum average and minimum gap duration an examination of those tests which failed shows that the longest gap which occurred was seconds in duration there were three other significant failures between a m and a m on there are strong indications that it was the ucsb that caused these gaps to occur this conclusion is based upon the fact that the electrical engineering on line classroom interactive graphics terminals was in full use that day until a m and the sel connection to the ibm has lower priority in the than the ucsb pfeifer macafee page rfc real time data transmission on the arpanet may on line system the remaining three tests which failed did not do so at any regular time bit rate or buffer size so no definite statements can be made about their source of delay the overall picture presented by table i is very promising in percent of the trials a communications link of the two host computers and a portion of the arpa network was able to take data from a real time process operating as high as bits second further encouragement is given by three additional tests which were carried out at bps and a buffer size of bits on at p m a minute test was executed with no gaps on at a m the same test was executed for minutes with no gaps the third test was conducted for minutes on at a m with no gaps in the process the tests were not carried out often enough or over a long enough period of time to obtain any statistical results or predictions the measurement task is made somewhat difficult by the fact that the state of the overall communications link is never repeatable from one test to the next for example it was found that a test which failed could usually be repeated successfully even when it was carried out within seconds of the previous test pfeifer macafee page rfc real time data transmission on the arpanet may pro buffer size bits cess bit rate ms sec sec sec ms ms ms ms pfeifer macafee page rfc real time data transmission on the arpanet may ms ms ms ms ms ms ms ms ms pfeifer macafee page rfc real time data transmission on the arpanet may a m a m p m v min test min test min test pm am am no gaps no gaps no gaps buffers sent buffers sent buffers sent time of day results of a test for transmitting buffers sent data from a continuous external process at ucsb sel b computer key max gap time ms through the ucsb host computer over avg gap time ms the arpa network and into a ucla min gap time ms site host discard socket gaps discon socket each test approx tinuity in sec process vii conclusions based upon the results of this experiment the following conclusions can be drawn high bit rate real time processes can use the arpa network to transmit data for relatively long periods of time real time processes accessing the network through large scale timesharing host computers can expect arbitrary delays or gaps probably attributable to the host computers and not the network pfeifer macafee page rfc real time data transmission on the arpanet may techniques for handling gaps of to second may be possible but second gaps as measured in this experiment will cause extreme hardship on any real time process this experiment has pointed up the need to conduct additional tests using a complete transmission link with actual data and with monitoring equipment at both the sending and receiving ends our current and future efforts are directed toward carrying out such experiments references interface message processors for the arpa computer network quarterly technical report no oct to dec bolt beraneck and newman inc semiannual technical summary on graphics lincoln laboratory massachusetts institute of technology nov d l retz an interactive system for signal analysis design implementation and applications csl report no computer systems lab university of california santa barbara ca this rfc was put into machine readable form for entry into the online rfc archives by via genie pfeifer macafee page 