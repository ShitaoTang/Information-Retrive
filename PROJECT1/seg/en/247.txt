 network working group t williams request for comments sdc nic july suggestions for a network data tablet graphics protocol disclaimer the work reported herein was supported by the advanced research projects agency of the department of defense under contract dahc c arpa order no amendment no program code no d and p the views and conclusions contained in this document are those of the author and should not be interpreted as necessarily representing the official policies either expressed or implied of the advanced research projects agency or the u s government introduction the purpose of this document is to add sdc s comments to the discussion of a protocol for network graphics within the arpa network community in general we are concerned with the development of the graphics protocol in two areas non interactive graphics and data tablet graphics as opposed to fully interactive graphics by non interactive graphics we mean situations in which there is little or no requirement for interaction with displays such displays are used for instance in data retrieval systems using graphics to display retrieved information in the form of charts x y graphs histograms scatter plots tabular displays etc in these systems each interaction with the system produces an entirely new display the displays themselves have little if any structure there is no necessity to interact with the picture itself other than perhaps by the use of light buttons it is important that non interactive graphics be simple to implement and use on the network therefore we suggest that the graphics protocol design be based upon non interactive graphics systems and that capabilities needed for interactive graphics be added as a super set this will ensure that the protocol complexities associated with interactive graphics do not impose problems for the user of non interactive graphics as they would if a non interactive subset were developed from a protocol based initially on interactive graphics the section of request for comment rfc describing actual display instructions contains a good basis for the development of a non interactive graphics protocol with it as a starting point a protocol for the generation of a picture can be developed and the organizational and structural information useful for interactive graphics can be developed later williams page rfc suggestions for a network data tablet july data tablet graphic inputs our primary topic of concern is data tablet graphics though there are a variety of data tablet implementation their functional characteristics are similar enough that they can be treated as a single class data tablet input consists of a triple of information x y z where x is the distance along the abscissa y is the distance along the ordinate the two quantities are usually measured to a precision of in and z is the distance above the writing plane there are a variety of encodings for z from a simple binary quantity on or off to three or more values giving various distances from on the surface to several inches above for our purposes here we will consider z as a binary entity input timing may also vary depending on the tablet implementation and installation interface timing varies from a single shot where only one coordinate point is input for each new time that z indicates that the stylus is on the writing surface to asynchronous where the tablet input is sampled on demand from the driving program or interface logic when certain conditions are met such as that the pen has moved a certain amount from the previous sample or that the program is ready for another data sample after a variable amount of processing to clocked synchronous where a timing pulse provides the sampling demand clock rates vary from a few one or two samples per second to nearly samples per second some clocks are fixed while others are controlled either by program or external switches relative to the amount of picture information contained in the data stream in general the data tablet input is far more voluminous than a similar computer generated image additionally the data tablet input stream contains temporal information that in certain cases is vital to the proper processing of the input therefore ways must be found to implement a data tablet graphics protocol that is flexible enough to accommodate a broad spectrum of data volume and that is compatible with the protocol for non interactive display images proposed data tablet input protocols data tablet input can consist of anything from a single point as would occur when something was being pointed at to literally thousands of bytes representing a hand drawn rendering of a picture or a line of text in many instances the raw data tablet input is preprocessed before it is passed to the principal processing program this preprocessing can consist of such things as a variety of smoothing algorithms filtering for thinning and or redundancy removal detection of certain operator actions such as uniquely williams page rfc suggestions for a network data tablet july marking each occurrence of placing the pen on the writing surface and raising it and possibly other more exotic processes such as corner detection fitting straight line segments and the like most of these latter processes will not be considered for inclusion in the protocol since they are usually unique to a particular investigator and his research therefore a data tablet graphic protocol should permit the sender to specify and the receiver to discriminate among at least four types of data tablet input single shot data unpreprocessed raw asynchronous data unpreprocessed raw synchronous data preprocessed data we will define formats for the first three then discuss the fourth in some detail before defining its format to reduce the number of bits transmitted data tablet information should be transmitted in incremental form a first point followed by the difference between each point and its predecessor to eliminate the trailing zeros that may be required for compatibility with the standard network graphics screen we have included provision for a scale factor by which all increments should be multiplied before use single shot data input format byte data tablet input op code byte type single shot byte x coordinate byte y coordinate op code x coord y coord williams page rfc suggestions for a network data tablet july in the following proposal for other protocols it is assumed that each stroke of the pen is sent as one entity a stroke being the data generated and processed between the time that z indicates that the stylus or pen is on the writing surface and the time it is lifted from the surface unpreprocessed raw asynchronous data input format byte data tablet input op code byte type raw asynchronous byte flags byte scale of deltas byte number of points byte st x coordinate byte st y coordinate byte delta x byte delta y byte n delta xn byte n delta yn op flags scale n o delta delta delta delta poi nts x y x y xn yn n n williams page rfc suggestions for a network data tablet july unpreprocessed raw synchronous data input format byte data tablet input op code byte type raw synchronous byte flags byte scale of deltas byte sampling rate to the nearest usec byte number of points byte st x coordinate byte st y coordinate byte delta x sign magnitude code byte delta y byte n delta xn byte n delta yn op flags scale rate n o x y delta delta delta delta poi nts x y xn yn n n williams page rfc suggestions for a network data tablet july preprocessed data input format there are a variety of processes that can be applied to raw tablet data before it is transmitted to the requesting program for instance when the tablet is noisy or jittery various smoothing algorithms may be applied the most common of these is some form of weighted clumped or moving average at sdc we have settled on an point moving average when smoothing is desirable another fairly common form of preprocessing is thinning or filtering to remove unnecessary or redundant data points depending on the end use of the data filter windows can have a variety of geometries including square rectangular diamond and circular and the filter may be single or double windowed sdc currently uses a single square window filter on all tablet input the window size is a variable and may be set to zero thus eliminating the filter logically the filter may be described as take x y if xp x w or yp y w is true where x y is the current data point xp yp is the previously accepted data point that either passed the filter or was the first point of the stroke and w is the window size pictorially this can be represented as w w xp yp v v w any point inside the square will be rejected any point on the boundary or beyond is accepted and becomes xp yp in addition to smoothing and filtering we have found it necessary that our character recognition algorithms be able to estimate the velocity along the path of the stroke therefore in addition to saving the x y coordinates that pass the filter smoothing if done precedes filtering and is done on the raw points we count and store the number of rejected points between the saved ones since the data tablet input is synchronous the count times the sampling rate divided into the distance between adjacent points is a sufficient approximation for our purposes our character generator also williams page rfc suggestions for a network data tablet july requires the rectangle surrounding a stroke defined by the minimum and maximum values of x and y in the stroke this information is very easy to generate during preprocessing assuming that other network nodes wanted to use sdc s tablet graphic software the character recognizer in particular we would have to know what if any preprocessing was done to the input data before it was sent our suggested format for this from of tablet data then is byte data tablet op code byte type preprocessed byte flags byte scale of deltas byte sampling rate if synchronous as indicated by flag byte window size byte number of points byte st x coordinate byte st y coordinate byte minimum value of x in the stroke byte minimum value of y in the stroke byte minimum value of x in the stroke byte minimum value of y in the stroke williams page rfc suggestions for a network data tablet july two forms follow from here depending upon another flag counts included and counts deleted byte delta x byte delta x byte delta y byte delta y byte rejected point count byte n delta xn byte n delta xn byte n delta xn byte n delta yn byte n rpcn flags scale rate window x y xmin ymin xmax ymax size points delta delta rcp delta delta rcpn x y xn yn counts included williams page rfc suggestions for a network data tablet july op flags scale rate window x y xmin ymin xmax ymax size points delta delta delta delta delta x y x xn yn n n counts deleted the flags in this format not only indicated whether or not the data is synchronous and whether the counts are present but may also be used to indicate whether or not the data was smoothed and the type of filtering character sets and character generation our work in character recognition impacts the proposed protocols in one other area that of character sets and character generation figure shows the displayable characters presently available we have planned extensions that will bring the set to characters the availability and use of our and others extended character sets must be provided for in the protocol the character set problem though is the easy one we have found that when dealing with hand printed input the computer generated output must be flexible enough to retain the geometry of the user s input at least temporarily this requires that we be able to generate characters in a large variety of sizes with variable aspect ratios independently specified sizes for x and y since this is not an available hardware function all of our characters are program generated we currently specify character size and ratios in terms of x and y multipliers applied to a character prototype the character prototype is constructed on a x grid extended if necessary to handle the long tails on p s q s etc where the grid line spacing is times the screen size the important point is that network transmission must be capable of specifying those types of characteristics when needed williams page rfc suggestions for a network data tablet july we propose then that a message format that specifies o character code o character position o character height and width as an inside we would rather that the character origin be the left hand baseline point rather than the center primarily because the center is ill defined unless the character space is specified to include vertical extensions in both directions but also because it is difficult to take advantage of variable spacing to justify characters that are of unequal width an aesthetic consideration of relevance in some displays figure sdc extended character set see pdf file endnote subscript notation is inline see the pdf file for a complete view of this document this rfc was put into machine readable form for entry into the online rfc archives by lorrie shiota williams page 