 network working group a bhushan request for comments mit dmcg nic march ftp and network mail system this paper describes my understanding of the results of the network mail system meeting sri arc on february and the implications for ftp file transfer protocol there was general agreement at the meeting that network mail function should be within ftp ftp currently provides two commands for handling mail the mail command allows a user to send mail via the telnet connection the server collects the mail and determines its end by searching for the character sequence crlf crlf the mlfl mail file command allows a user to send mail via the data connection requires a user ftp to handle the command but transfer is more efficient as server need not search for a special character sequence these commands are being used to provide network mailing facilities local mail and sndmsg programs have been modified at many sites to include network mailing e g user host at bbn tenex and mail host user at mit dmcg the network mail system should provide a facility whereby users can conveniently send messages to other network users who have mailboxes at one or more hosts it is not required that the messages or mail be delivered in real time the network mail system is not an interactive inter console communication facility but it may be possible for some sites to deliver urgent mail to users in real time e g print mail at user console if user is currently logged in the mail system also does not provide a general inter process communication facility though it may be possible to deliver messages to programs which have mailbox addresses inter process and inter entity communication facilities are very desirable but are beyond the scope of the network mail system the concepts of mailbox and mailbox addresses are central to this discussion of network mail system a mailbox is a place where the mail is stored before a user picks it up it may be a file in the user s directory or it may be a bin for hard copy the mailbox address is the address required by the sender in order to send the mail to its destination mailbox for users who have an on line network mailbox the mailbox address contains the host address and the user s mailbox identification at that host the mailbox identification is that which is required by an ftp server in order that it may put the mail in the desired mailbox the terms mailbox address will be used to refer to the on line network mailbox address bhushan page rfc ftp and network mail system march network mail system functions the network mail system should provide the following six functions creating this refers to the manner in which the user creates or composes his message the ftp servers do not explicitly provide any message editing capability server s editing conventions may be applicable in the case of mail command editing conventions such as those for character delete and line cancel vary widely over the network the user is most familiar with his local host conventions and these should be used for network mail editing the user also has access to local editing systems which can be used for composing message files the message file may then be transmitted via the mail or mlfl commands mlfl being preferable the present ftp approach of assuming the creation of messages to be sender s responsibility seems adequate tip users if they desire editing facilities should use intermediate hosts for creating and sending messages locating how sender determines receivers address ftp assumes that the sender knows the receivers correct address there is no published or on line list of mailbox addresses there is however a list of network participants maintained on line and published by the network information center nic at sri arc the network users have been assigned a unique nic ident and host site by the nic it was therefore specified in ftp that ftp servers maintain a table that maps nic idents to mail box identifications the nic will maintain on line and publish the local mailbox address information for network participants it would be possible for users to look up a published list or querry the nic on line to locate destination addresses the nic will also provide an on line facility similar to ftp that can be used by programs for retrieving the address information this latter approach of the nic s maintaining addresses has several advantages the user can obtain a number of addresses for a group and use these to transmit mail the ftp servers need not maintain nic ident tables and the nic can provide a good facility for locating addresses from last names nic idents or even sketchy information it may still be desirable that ftp servers accept nic idents last names and other standard forms as mailbox identifiers sending how message is sent to the destination mailbox the messages may be sent directly to the destination mailbox via telnet or data connections or via an intermediate host such as the nic ftp does not explicitly provide for mail forwarding by intermediate hosts but ftp servers may be able to recognize addresses as not being local and forward mail in the event mail bhushan page rfc ftp and network mail system march is to be forwarded a desirable facility is to have the intermediate site return an acknowledgement by request upon delivery of mail or if delivery fails within a specified time the current ftp specifications recommend that ftp servers accept multiple addresses but do not require this storing where mail is stored before reading and if information is available for later reference or retrieval the ftp does not require that sender store mail or keep duplicate copies it is the receiver s responsibility to store the information for reading reference or retrieval the receiver need not store the mail as a data file but can directly print it out on a user console or line printer ftp does not specify the procedures for storage handling by intermediate sites if intermediate site is used for forwarding the mail until it is delivered to its final destination if the mail is undeliverable then the intermediate site should return the undelivered information to the sender a similar situation arises when sending of mail is deferred by the sending site destination host may be down the sending site then acts as an intermediate forwarder insofar as the user is concerned recording should the mail be catalogued and recorded for later reference and retrieval ftp currently does not provide an explicit mechanism for the receiver to record mail if an intermediate site the nic is used for mail distribution then a function of such a site could be to record mail if so requested nic is ideal for recording mail but other sites may also wish to record the mail if the mail is recorded then it is not necessary to send the entire contents of the mail instead only a citation for the document can be sent and the receiver can retrieve the mail only if he wants to this is particularly useful for large documents such as nwg rfc which are distributed to a group the citation may contain author title retrieval pathname and perhaps an abstract reading how the mail is finally presented to and read by the user ftp currently assumes that mail reading is entirely the receiving site s function however there are ways in which the sender can aid the receiver in providing improved mail reading facilities for example the receiving system if it knows a message to be urgent can deliver it immediately at a user console long messages may be put in separate files with notification in user s regular mail alternately mail could be a citation that the reading program can retrieve upon user request selective handling of different classes of mail is important for an improved network mail system bhushan page rfc ftp and network mail system march models for mail system use the user of a mail system can use intermediate site for locating addresses recording and or distributing mail and for creating and reading mail we therefore have the following models for mail system use the user connects directly to the destination ftp server and sends mail using the mail command local editing functions are limited to character delete and line cancel assuming user is in line at a time mode and server conventions may also apply the user only needs a user telnet program at his site but needs to know the destination address this model is specially applicable to tip and other mini host users who do not have a user ftp or user mail programs the user composes the mail using a local editor or mail system and then requests his user ftp or mail program to send the mail directly to the destination via the ftp mail or mlfl commands the user needs to know the destination address the mail can be deferred by the sending program if the destination host is down tip users can use this model by using the facilities of a home base host the user uses an intermediate site such as nic other sites may provide forwarding services too for mail distribution the user need not know the destination addresses but can use nic idents for individuals and groups of individuals the mail can be recorded on request and its sending can be deferred the destination host may be down or it may be more economical to defer mail the message to be mailed may be created at the local site using local editing facilities or it may be created directly at the intermediate site the user may send a citation of the mail instead of the complete mail item the citation refers to an existing document which can be retrieved on line such as the nic number of a nic journal communication mailing to tip users the tip does not currently provide an ftp server or mailbox facilities while it is possible to send mail to tip terminals such as line printers it seems undesirable to do so because of the possibility of losing mail the lack of privacy and the fact that user may be several or several hundred miles away from the location of the tip the tip users normally have a home base computer where they do their computing work most of the time the tip user problem bhushan page rfc ftp and network mail system march is best solved by requiring that tip users rent mailboxes at their home base host such a host can provide good mail reading and querry facilities a tip user can request his home host to send him notification of mail on a tip terminal if rdml command nwg rfc is accepted in ftp tip users could use such a command more important if the user has a number of mailboxes on different hosts the rdml or rdmf command can be used to read his mail at all the sites where he has mailboxes access control in mail system it has been suggested that ftp specification should require that mail function for receiving mail should be free i e ftp servers should not require the user to login send the user pass and acct commands in the absence of the access control commands the ftp server should charge the cost of receiving mail to an overhead or browsing account it should be noted that this free mail function using default user account may not allow non mail related commands without reinitializing this requirement will improve communication among the network users some systems such as multics have mechanisms for access control in the receipt of mail that is a user can specify who is eligible to send him mail normally users give then access i e any one can send mail the access control commands would be required to gain privileged access the user command does not seem the best way to identify the sender of mail consider users logged in as guest iccc network mit dmcg and network user a separate from command seems desirable such a command can be used to identify the sender as well as to send acknowledgments and replies the receiving site can tag the mail as from akb at mit dmcg logged in as guest the receiver can then send reply to the mailbox address akb at host sndmsg akb dmcg or mail dmcg akb network information center functions the nic is a very special facility for handling mail it provides facilities for recording and distributing mail to individuals and groups of individuals and for locating users addresses the nic will also undertake to provide distribution of unrecorded mail currently the nic requires that users log into the nic and use nls to create and distribute mail using nls for creating mail has been a frustrating experience for many who are used to different editing systems recently there has been a problem that nic is overloaded at most times of the day and even if one can get a network terminal and log in the interaction is quite slow as nic or nls is designed for character at a time interaction with remote echo the bhushan page rfc ftp and network mail system march use is inefficient using nic is particularly unbearable when the user falls behind in his echo by as much as an entire line an alternative to direct use of nic is to use the nic via ftp and programs at the user s site the user can create journal documents using his own local editing system and then transfer it to nic via ftp the user may have to specify such information as author title where the acknowledgment should be sent and journal number if the item is to be recorded it should also be possible for users to send sequential files to nic and have them restructuredinto nls form without having to do an input sequential a suggestion is to nls the file if its name is suffixed with a nls alternately it should be possible for user s to retrieve journal documents and other sequential files without having to do a previous output sequential the nic currently delivers mail via hardcopy and or on line on line currently means that user must log into nic to see if he has a message and read it by print branch the messages are not seen by the destination users for several days and many users get their hard copy before they have had a chance to examine their on line nic mail if the nic were to deliver mail via ftp to network users then the mail turn around time will be greatly speeded and the users will not have to log into the nic large documents need not be mailed to the user in their entirety but only a citation need be sent the nic willhave to collect the information on the mailbox addresses of network participants for delivering mail especially since it appears that many ftp servers are not respecting nic idents it is recognized that a user may have only one the most used of these addresses the nic identification subsystem currently accessible via nls only contains information on users such as affiliation us mail address telephone numbers etc and groups members etc the on line mailbox address information can be added here the nic will undertake to provide a facility whereby the identification subsystem can be querried by programs allowing mailing programs to retrieve the addresses automatically this facility will be separate from ftp ftp modifications the ftp currently does not provide explicit facilities for recording mail communicating sender s address sending program readable citations specifying author and title for documents requesting acknowledgments and indicating message type urgent ordinary and long to overcome these deficiencies we can take any of the following approaches bhushan page rfc ftp and network mail system march kludge the desired features in the pathname syntax of the mail and mlfl commands justifying the kludge on the grounds that most of the functions are to be used only by the nic add new commands for the desired functions and alter the mail and mlfl commands somewhat to recognize the existence of the new commands define a new mail command which incorporates the missing functions in the process defining new commands for the desired functions the mail and mlfl commands can be used in their present form but may be gradually phased out the first approach seems undesirable to me as many of the missing functions can be used by other sites as well in addition it will be easier to write programs to deal with commands rather than a complex syntax the second and the third approaches are not very different from each other the third approach seems preferable as it will allow existing mail programs to function in their present form using the third approach consider the following new ftp commands mlto mail to the argument is one or more mailbox identifiers separated by commas it is suggested that if there is no argument the mail should be sent to some responsible user or printed on a printer this command starts the sequence of optional ftp mail related commands described below the sequence ends with the text file or cita citation commands from the argument is the address of the sender or senders it is in a standard form that can be interpreted by programs as well as human users the information is to be used for identifying the sender s for sending replies and for sending acknowledgments if the receiver is an intermediate forwarding site mtyp mail type this identifies the type of mail as u urgent o ordinary and l long the receiving system can take the appropriate actions from this knowledge the default assumption is ordinary mail reco record the mail the argument if present is the identifying information for recording such as nic journal number if no argument is present the server will assign the recording information and send an appropriate reply real time or deferred auth author identifies the author of the document in a form acceptable to the server nic ident may be required by nic bhushan page rfc ftp and network mail system march titl title identifies the title of the document the argument is an ascii string ending with the sequence crlf crlf ackn acknowledge relevant for intermediate forwarding sites asks the server to send acknowledgment on delivery or if delivery fails within a specified time text no arguments starts the transfer of mail over telnet connection in an identical manner as mail file no arguments starts transfer of mail over the data connection in an identical manner as mlfl cita citation argument is the pathname of retrievable file we also need to define new reply codes for handling mail some sites have expressed the need for replies such as send only x bytes of mail other replies could specifically request additional commands such as user pass acct for privileged mailing from ackn for mail forwarding and auth titl for recorded mail another suggestion that may be given consideration is allowing type byte other than a for file command mailing large files between like machines such as pdp s is more efficient in i the rdml and rdmf commands proposed by bressler and thomas nwg rfc also merit consideration as they would aid the handling of mail for users who have mailboxes at different hosts this rfc was put into machine readable form for entry into the online rfc archives by kelly tardif viagenie bhushan page 