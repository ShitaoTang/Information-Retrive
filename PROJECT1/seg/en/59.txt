 network working group john m mcquillan request for comments bolt beranek and newman inc nic september categories b updates rfc obsoletes two proposed changes to the imp host protocol this note describes two changes to the imp host communication protocol described in bbn report and revised in rfc the first deals with the imp to host interface and the second timeout mechanism on each imp transmission to the host the second deals with the host to imp interface and proposes a new timeout mechanism these changes are independent in statement and in implementation we invite comments on each proposal if no adverse comments are received they will be installed in the network on tuesday october if serious adverse comments are received action will be delayed until early november declaring an unresponsive host as dead to the network currently a host is given seconds to accept each packet of a regular message and is also given seconds to accept non regular messages if the host is unresponsive for this period of time the imp takes the following actions a all messages held for the host are discarded b the source host for each discarded messages is sent a type subtype message incomplete transmission destination host tardy c the imp ready line is dropped and raised again d the host is sent type messages nop e the host is sent a type message imp host interface reset we propose that in addition the imp declare the host dead to the network upon receipt of the next bit from the host the imp will declare the host alive and begin the second delay while the information that the host is now alive is propagated throughout the network page rfc john m mcquillan this change is an attempt to alleviate some problems that are caused by hosts whose ready lines are up when they are not able to accept bits from the imp several hosts fall into this category there are some hosts whose ready lines are wired to be on all the time it is annoying in terminal use and in running survey programs to have to wait for seconds to find out that a host is not responding other hosts sometimes go into break point mode for system debugging for several minutes at a time the ncp software is not running and messages accumulate in the network and are thrown away it seems preferable to declare such hosts to be dead until they send a message to the imp and then any source host attempting to communicate can be notified at once that the destination host is dead timing out host to imp messages in seconds when the imp receives a message from a host it must acquire several internal resources in order to process the message it must assign it a message number make an entry in an internal table and so on if any of these imp resources is not available the imp simply waits until it does become available it cannot take any more messages from the host and so the interface is stopped this condition is usually momentary but under unusual circumstances the imp may not be able to process a message it has begun to accept for many seconds this situation creates an especially difficult problem for hosts with half duplex interfaces if the imp takes seconds to process a message then the imp to host timeout outlined in takes effect and the host loses all messages sent to it in the last seconds it should be noted that the half duplex interface may be the cause of a deadly embrace e g the reason that the imp cannot acquire the necessary resources to process a given message may be that the host in question has several messages on its queue and they are tying up storage message thus a host should send its imp at least two nops or other messages whenever it receives a type message from its imp page rfc john m mcquillan numbers or table slots the host must accept these messages before any more messages can be introduced into the network even for hosts with full duplex interfaces occurrences of this situation might interfere with other useful communication we propose to notify the host when the imp cannot continue to process a message that it has begun to accept the imp will try to process the message for seconds and then will send the host a type subtype message bits which will be defined as incomplete transmission resources unavailable in such a case the imp has not been able to send any part of the message into the network the imp will take in the remainder of the message at that point a host with a half duplex interface should begin to accept messages from the imp while a host with a full duplex interface might attempt to transmit some other message the host may attempt to retransmit the incomplete message if that is desirable this rfc was put into machine readable form for entry into the online rfc archives by bbn corp under the direction of alex mckenzie page 