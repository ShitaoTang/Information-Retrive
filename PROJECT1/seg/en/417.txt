 network working group bernard p cosell request for comments david c walden nic bolt beranek and newman inc categories august updates obsoletes letter to tip users this is the second letter to tip users the first was rfc there will be more letters to tip users as they seem to us to be a good way to keep you informed about what s going on we suggest you keep these letters with your tip user s guide tug as we will use the letters to provide documentation of tip system changes which are made before we can get tug revisions printed and distributed it is almost inevitable that the tug revisions follow actual system changes further more these letters will allow us more discussion of new commands than in tug some of the changes we will be making to the tip have been suggested by tip users we won t bother with acknowledg ments the protocol to login and protocol to close both commands will be removed very soon we presume no one uses these commands any more since they have been replaced by login and close as we warned in tip letter the login command will be given a parameter soon the host number up to now given with the host command at the same time host will be changed so it does a simultaneous receive from host and send to host presently host is the same as send to host several changes will be made to the transmit commands very soon first transmit on no characters and transmit on every character will be removed their functions will be covered by the other transmit commands transmit now will continue to function as at present it will cause the one message presently being accumulated to be sent as soon as possible transmit on linefeed and transmit on message end will continue to cause the message being accumulated to be sent on linefeed and control s however they will additionally cause the message being accumulated to be sent when the character buffer is almost full thus it will no longer be necessary to give a transmit every with transmit on linefeed and transmit on message end transmit every will continue to cause the message being accumulated to be sent as near as possible to every th character however values of which are bigger than the size of the page rfc nic input buffer will cause transmission when the buffer is almost full and a value of for will reset the terminal to its initial setting transmit on linefeed mode off transmit on message end mode off and transmitting every character thus transmit every has the effect of the removed transmit on no character command and transmit every has the effect of the removed transmit on every character command there are two ways outside of letters and the telephone to communicate your suggestions and complaints to us log into bbn tenex and sndmsg to walden or use the nic journal system to send a message to dcw dave likes letters best incidentally we are going to remove the news herald from the tip s hello message the problem is that we don t know when everybody has read the latest news so that we can turn off the herald therefore we can t turn it off therefore it is useless check the news every time you use the tip if once the news begins printing you discover you have already seen it you can stop it by typing close lf on a hit attention first a new tip message will have been added by the time you get this letter the message tip going down this message will be printed on every tip terminal shortly before the tip is taken down for preventive maintenance new software releases etc see rfc for further discussion of this topic when this message is printed all tip users should cleanly stop what they are doing with a host eventually this message will include information on how long until the tip will go down for how long it will be down and why while we are on the subject of tip messages let us mention that we will be adding a number of new messages which we believe will remove some of the present confusion about what the tip is doing unfortunately we don t have the space to store the message text strings so we will use numbers for the new messages the format of these messages will probably be something like m for message perhaps when the tips get more core we can replace the number messages by text messages we are thinking of changing all the tip login commands to open commands which would be more opposite to the close commands and not so liable to confusion with host login on page of the tug is a description of how hosts can send commands to a tip terminal be warned if you decide to use this facility that we are changing the tip command language slowly and we will not be constrained in these changes by the fact that some hosts are sending tip commands therefore if a host is going to send a page rfc nic command to a tip it ought to implement this in a manner that can be changed easily some tip users have been seeing the following problem they are communicating with a host when suddenly they get the message dead if they try to login to the host again they do not get the dead message but the host refuses to allow the login by either doing nothing closing or refusing the problem was that occasionally the network partitioned briefly for instance one of the two cross country lines was down and the other got flaky for a few seconds if during a period when the network is partitioned a tip user sends a message to a host which cannot be reached the tip types dead and closes the connection to the host the host on the other hand may not have been trying to send to the tip when the network partitioned in that case it might not have noticed that the network partitioned and therefore still thinks it has an open connection to the tip when the tip then tries to re login to the host the host refuses because it already has an open connection with that particular tip device now that we have three independent cross country paths we do not expect this problem to occur often but if it does we see no short term solution we can t just let a close reset the connection since the user s immediately preceeding login destroyed the host supplied socket numbers one can get out of this state by executing the host host protocol command from the tip which resets all tip users at the given tip talking to the given host but this is a little gross what is maybe needed is a host host protocol command to reset the host s connections with a particular user tip socket we will try to understand the ramifications of such a command and perhaps undertake promotion of a host host protocol change in the meantime frequently when the above problem happens some other tip terminal can still login to the host and then halt the hung terminal s job from the host side if it is not possible to get through on another connection a telephone call to the host asking them to log the job out may be necessary or if there is really no other user talking to the particular host the reset command can be executed this command is not documented but we will tell a responsible person at each tip site how to execute the command there is a problem related to the above problem which some tip users have seen occasionally an imp crashes somewhere in the network and takes a packet of a message along with it eventually the source of the message gets an incomplete transmission message from the network when the tip gets this message it closes the connection and calls the destination dead this is what most other hosts do also we understand a more reasonable thing to do might be to retransmit the message or to tell the user and then let him continue we would like to do one of these but before retransmission or letting the user page rfc nic continue the tip and host s allocate counters must be resynchronized however there is no host host protocol way to synchronize simple enough for the tip to use what may be needed is a simple host host protocol reset allocate command we will try to understand this issue and again perhaps undertake promotion of a host host protocol change the above two problems explain part of the lost allocates but not all we have now instrumented the tip program in a manner which we hope will help us find the rest of the lost allocate problem soon the tip s logger opener has been causing users some problems upon examination the problems were seen to originate from basic design assumptions within the logger which we are working on changing in the short term however we think that a discussion of what the logger is doing and how it works will alleviate some of the grief for the user opening proceeds in three phases in the first the user is queued up waiting to get the tip s logger in the second the user has gotten the tip s logger and is beginning the login sequence in the third the user has completed the login sequence and is waiting for the host to open up the actual data connections many of the problems stem from the fact that only one user may be proceeding through phase at a time hence the need for the queue of phase any single user may tie up phase for at most about minute this is the canonical timeout in the logger notice that this does not include the times in either the first or third phases thus the actual delay before you get a timeout after you type l can be minute minutes minutes depending on how many other people are having difficulty logging in at the same time abort login a l does three different things depending on which phase of logging in the user is in in phase it resets the timer to be close to overflowing so that it is responded to with a timeout shortly after the command is given in phase it does nothing at all and in phase it merely removes the user silently from the logging queue we will medium term have the tip type out something like your logger when you get off the queue and the logger begins trying to open your connections this will at least alleviate user uncertainty as to whether he is in phase or phase long term we will probably make the logging process reentrant so that users will not interact with one another quite so destructively in the short term here is a small cookbook on how to undo a login that seems to not be working when you have waited as long as you would like to for the login to take place you may type a l if the tip responds with timeout in a few second and has not typed t open or r open then you page rfc nic are aborted and may attempt logging in again if it types timeout but has typed out t open or r open then you should type c and wait for that to be responded to you must wait if you get no response at all to a l and the tip has typed that one or the other connection is open you should type c and wait as above finally if the tip makes no response and has not opened any connection than you are free to proceed from now on the name of the device code execuport command will be device code extra padding since there are a number of other terminals which require this feature the latest to be added to the list is the datapoint this rfc was put into machine readable form for entry into the online rfc archives by bbn corp under the direction of alex mckenzie page 